<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-admin docs-version-8.2 docs-doc-page docs-doc-id-undefined" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Set up secure storage of sensitive data using Vault | Creatio Academy</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://academy.creatio.com/docs/8.x/img/OG-Creatio-Docs.jpg><meta data-rh=true name=twitter:image content=https://academy.creatio.com/docs/8.x/img/OG-Creatio-Docs.jpg><meta data-rh=true property=og:url content=https://academy.creatio.com/docs/8.x/setup-and-administration/8.2/administration/security-settings/store-secrets-in-vault><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=8.2><meta data-rh=true name=docusaurus_tag content=docs-admin-8.2><meta data-rh=true name=docsearch:version content=8.2><meta data-rh=true name=docsearch:docusaurus_tag content=docs-admin-8.2><meta data-rh=true property=og:title content="Set up secure storage of sensitive data using Vault | Creatio Academy"><meta data-rh=true name=description content="You can improve security of Creatio by not storing sensitive data in the configuration files. Use Vault by HashiCorp designed for secure storage and management of sensitive data. Sensitive data include:"><meta data-rh=true property=og:description content="You can improve security of Creatio by not storing sensitive data in the configuration files. Use Vault by HashiCorp designed for secure storage and management of sensitive data. Sensitive data include:"><link data-rh=true rel=icon href=/docs/8.x/img/favicon.ico><link data-rh=true rel=canonical href=https://academy.creatio.com/docs/8.x/setup-and-administration/8.2/administration/security-settings/store-secrets-in-vault><link data-rh=true rel=alternate href=https://academy.creatio.com/docs/8.x/setup-and-administration/8.2/administration/security-settings/store-secrets-in-vault hreflang=en><link data-rh=true rel=alternate href=https://academy.creatio.com/docs/8.x/setup-and-administration/8.2/administration/security-settings/store-secrets-in-vault hreflang=x-default><link rel=preconnect href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var d=t.getElementsByTagName(a)[0],g=t.createElement(a);g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+r+("dataLayer"!=n?"&l="+n:""),d.parentNode.insertBefore(g,d)}(window,document,"script","dataLayer","GTM-5C6KM9TP")</script><link rel=stylesheet href=/docs/8.x/assets/css/styles.1cb72ea6.css><script src=/docs/8.x/assets/js/runtime~main.46e08d89.js defer></script><script src=/docs/8.x/assets/js/main.c9889561.js defer></script><body class=navigation-with-keyboard><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C6KM9TP" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript>


<script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/docs/8.x/img/logo-white.svg><link rel=preload as=image href=/docs/8.x/img/logo.svg><link rel=preload as=image href=https://academy.creatio.com/docs/sites/en/files/images/Setup_and_Administration/vault/vault_creatio_scheme.png><link rel=preload as=image href=https://academy.creatio.com/docs/sites/en/files/images/Setup_and_Administration/vault/vault_keys.png><link rel=preload as=image href=https://academy.creatio.com/docs/sites/en/files/images/Setup_and_Administration/vault/aes_keys.png><link rel=preload as=image href=/docs/8.x/img/accelerate.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class=navtop><div class=container-fluid><div class=navtop__content><div class=search><form method=get><input class=search__input type=text placeholder=Search name=search><input class=search__button type=submit value=Search></form><div class=search__toggle></div></div><ul class=sites><li class=sites__item><a href=https://www.creatio.com/ rel=nofollow target=_blank>Creatio</a><li class=sites__item><a href=https://community.creatio.com/ rel=nofollow target=_blank>Community</a><li class=sites__item><a href=https://marketplace.creatio.com/ rel=nofollow target=_blank>Marketplace</a><li class=sites__item><a href=https://knowledge-hub.creatio.com/ rel=nofollow target=_blank>Knowledge Hub</a></ul></div></div></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class="navbar__inner container-fluid"><div class=navbar__items><div class=navbar__toggle><span></span></div><a class="navbar__brand navbar__brand_mobile" href=/><img src=/docs/8.x/img/logo-white.svg alt="Creatio Academy"></a><a class=navbar__brand href=/><img src=/docs/8.x/img/logo.svg alt="Creatio Academy"></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/8.x/>Guides</a><a href=https://academy.creatio.com/e-learning target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">E-learning</a><a href=https://academy.creatio.com/training target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Training</a><a href=https://academy.creatio.com/certification target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Certification</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/store-secrets-in-vault>8.2</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/8.x/setup-and-administration/administration/security-settings/store-secrets-in-vault>8.3</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/store-secrets-in-vault>8.2</a><li><a class=dropdown__link href=/docs/8.x/setup-and-administration/8.1/administration/security-settings/store-secrets-in-vault>8.1</a><li><a class=dropdown__link href=/docs/8.x/setup-and-administration/8.0/administration/security-settings/store-secrets-in-vault>8.0</a></ul></div></div><div class="navbar__items navbar__items--right"><div class=search><form method=get><input class=search__input type=text placeholder=Search name=search><input class=search__button type=submit value=Search></form><div class=search__toggle></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_bSxm><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=container-fluid><div class=docRoot_cWv0><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="doc-menu sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/8.x/setup-and-administration/8.2/category/administration>Administration</a><button aria-label="Collapse sidebar category 'Administration'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/setup-and-administration/8.2/category/user-and-access-management>User and access management</a><button aria-label="Expand sidebar category 'User and access management'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/setup-and-administration/8.2/category/licensing>Licensing</a><button aria-label="Expand sidebar category 'Licensing'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.2/administration/pricing-model-limits>Pricing model</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/setup-and-administration/8.2/category/logging-tools>Logging tools</a><button aria-label="Expand sidebar category 'Logging tools'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/8.x/setup-and-administration/8.2/category/security-settings>Security settings</a><button aria-label="Collapse sidebar category 'Security settings'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/secure-file-upload>Secure file upload</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/recommended-information-security-settings>Information security settings</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/content-security-policy>Content security policy</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/store-secrets-in-vault>Sensitive data security</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/host-header-protection>Host header protection</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/limit-ip-for-login>IP restrictions</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/platform-cookies>Platform Cookies</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/remote-access-for-creatio-support>Remote access for Creatio support</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/setup-and-administration/8.2/category/creatio-maintenance>Creatio maintenance</a><button aria-label="Expand sidebar category 'Creatio maintenance'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/setup-and-administration/8.2/category/on-site-deployment>On-site deployment</a><button aria-label="Expand sidebar category 'On-site deployment'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_z5aJ"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role=alert><div>This is documentation for Creatio <b>8.2</b>.</div><div class=margin-top--md>For up-to-date documentation, see the <b><a href=/docs/8.x/setup-and-administration/administration/security-settings/store-secrets-in-vault>latest version</a></b> (<!-- -->8.3<!-- -->).</div></div><div class=docItemContainer_c0TR><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/docs/8.x/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/8.x/setup-and-administration/8.2/category/administration><span itemprop=name>Administration</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/8.x/setup-and-administration/8.2/category/security-settings><span itemprop=name>Security settings</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Sensitive data security</span><meta itemprop=position content=3></ul></nav><div class=creatio-tags><div class=creatio-tags__content><span class="theme-doc-version-badge badge badge--secondary">Version: 8.2</span></div></div><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Set up secure storage of sensitive data using Vault</h1></header>
<p>You can improve security of Creatio by not storing sensitive data in the configuration files. Use <a href=https://www.vaultproject.io/ target=_blank rel="noopener noreferrer">Vault by HashiCorp</a> designed for secure storage and management of sensitive data. Sensitive data include:</p>
<ul>
<li>passwords</li>
<li>usernames</li>
<li>API keys</li>
<li>access tokens</li>
</ul>
<p>You can use a secure Vault storage for your connection parameters normally stored in the ConnectionStrings.config file:</p>
<ul>
<li>Creatio databases</li>
<li>Quartz (if stored in a separate DB)</li>
<li>Redis</li>
<li>s3Connection</li>
<li>ElasticSearch</li>
<li>influx</li>
<li>MessageBroker</li>
</ul>
<p>You can move the connection parameters to Vault during <a href=https://academy.creatio.com/docs/8.x/setup-and-administration/category/on-site-deployment target=_blank rel="noopener noreferrer">deployment</a> or in a deployed environment.</p>
<p>Vault uses secrets to store sensitive data. Secrets are written to Secrets Engines: storages of secrets. There are several types of Secrets Engines. Use the key-value (KV version 2) Secrets Engine type for the storage of sensitive Creatio data. This will enable you to store sensitive information as key-value pairs. The value is the sensitive information, while the key must be specified in the ConnectionString.config file of your Creatio server. You can also store encryption keys (AES) in Vault.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class=admonitionHeading_TMsN>note</div><div class=admonitionContent_vXIg><p>You can further configure Vault to track versioned key-value pairs.</div></div>
<figure><figcaption>Fig. 1 Interaction diagram for Creatio and Vault<!-- --> <a id="" name=""></a></figcaption><div class=img-cotainer><img src=https://academy.creatio.com/docs/sites/en/files/images/Setup_and_Administration/vault/vault_creatio_scheme.png alt="Fig. 1 Interaction diagram for Creatio and Vault"></div></figure>
<p>The general procedure for Vault connection and setup is as follows:</p>
<ol>
<li>
<p>Steps on the Vault side:</p>
<ol>
<li>Deploy and run the Vault server.</li>
<li>Create secret keys.</li>
<li>Set up the security policy.</li>
<li>Set up the authorization parameters.</li>
</ol>
</li>
<li>
<p>Steps on the Creatio side:</p>
<ol>
<li>Set up Vault connection parameters.</li>
<li>Set up the string in ConnectionString.config.</li>
<li>Enable the flags.</li>
<li>Restart Creatio.</li>
</ol>
</li>
</ol>
<p>Let’s consider these steps in more detail.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-21>Steps on the Vault side<a href=#title-3786-21 class=hash-link aria-label="Direct link to Steps on the Vault side" title="Direct link to Steps on the Vault side">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-1>Deploy and run the Vault server<a href=#title-3786-1 class=hash-link aria-label="Direct link to Deploy and run the Vault server" title="Direct link to Deploy and run the Vault server">​</a></h3>
<p>Run the Vault server in production mode before use. You can deploy Vault both on a dedicated server and a server with other Creatio components, guided by the general <a href="https://academy.creatio.com/documents?id=1456" target=_blank rel="noopener noreferrer">server-side system requirements</a>. This can be done during the deployment of Creatio or at a later stage.</p>
<p>Deploy the Vault server on a Linux/Windows machine and enable HTTPS. Use the server certificate stored on the same machine as the Vault server to configure HTTPS. The certificate can be issued and signed by any trusted CA.</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class=admonitionHeading_TMsN>Important</div><div class=admonitionContent_vXIg><p>Store the private key for the server certificate in a protected directory.</div></div>
<p>The Vault documentation covers deployment and launch in more detail:</p>
<ol>
<li><a href=https://learn.hashicorp.com/tutorials/vault/getting-started-install target=_blank rel="noopener noreferrer">Installation</a>.</li>
<li><a href=https://learn.hashicorp.com/tutorials/vault/configure-vault target=_blank rel="noopener noreferrer">Configuration</a>.</li>
<li>First <a href=https://www.vaultproject.io/docs/commands/server target=_blank rel="noopener noreferrer">start</a>.</li>
<li><a href=https://www.vaultproject.io/docs/commands/operator/init target=_blank rel="noopener noreferrer">Initialization</a> after the first start.</li>
</ol>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class=admonitionHeading_TMsN>note</div><div class=admonitionContent_vXIg><p>Save the unseal keys and token generated during the initialization. This is required to ensure starting the server is safe and start it with administrator privileges.</div></div>
<p>Actions performed each time the Vault server is restarted:</p>
<ol>
<li><a href=https://www.vaultproject.io/docs/commands/server target=_blank rel="noopener noreferrer">Restart</a>.</li>
<li><a href=https://www.vaultproject.io/docs/concepts/seal target=_blank rel="noopener noreferrer">Unsealing</a> using the unseal keys generated during the initialization.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-2>Create a storage for secret keys<a href=#title-3786-2 class=hash-link aria-label="Direct link to Create a storage for secret keys" title="Direct link to Create a storage for secret keys">​</a></h3>
<p>Use the key-value (KV version 2) Secrets Engine for the storage of secrets.</p>
<p>Vault can store versioned sensitive data in specialized storages (Secrets Engines). Each secrets engine has a unique path as an attribute required for connection. We recommend using your website’s name as the path for the storage of sensitive Creatio data.</p>
<ol>
<li>Go to the <strong>Secrets</strong> section in the Vault UI.</li>
<li>Create a key-value secrets engine. We recommend using the name of the product for which the secrets are created as the name of the secrets engine. For example, Creatio. Learn more about creating a secrets engine in the <a href=https://www.vaultproject.io/docs/secrets/kv/kv-v2 target=_blank rel="noopener noreferrer">Vault documentation</a>.</li>
</ol>
<p>A secrets engine can hold several secrets, each corresponding to a specific connection string or encryption key. Specify a unique path to each secret in the secrets engine. A single secret can hold multiple key-value pairs, each pair meant for a different type of sensitive data. For example, a login and its password are stored in Vault as two key-value pairs,</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-3>Create secret keys<a href=#title-3786-3 class=hash-link aria-label="Direct link to Create secret keys" title="Direct link to Create secret keys">​</a></h3>
<p>To create private keys for the database connection string in the ConnectionString.config file:</p>
<ol>
<li>
<p>Go to the <strong>Secrets</strong> section in the Vault UI.</p>
</li>
<li>
<p>Open the secrets engine you created.</p>
</li>
<li>
<p>Specify the Path to the secret. To connect to the database, as well as to Redis, the path to sensitive data must match the name of the corresponding connection string in ConnectionStrings.config. For example, if you are using PostgreSql, specify dbPostgreSql in the database connection string.</p>
</li>
<li>
<p>Configure other connection strings that contain sensitive data in the same way.</p>
</li>
<li>
<p>In each secret that has a matching connection string, create all required key-value pairs where the key contains a unique secret name (we recommend meaningful names so that the key is easy to identify) and the value contains the sensitive data. Keys and values ​​are case-sensitive.</p>
<p>As a result, the path to the created secret is as follows:  <code>&lt;secretsEnginePath>/dbPostgreSql</code>, where  <code>&lt;secretsEnginePath></code> is the path to the secrets engine, and dbPostgreSql is the path to the secret.</p>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class=admonitionHeading_TMsN>Important</div><div class=admonitionContent_vXIg><p>When changing secret values in Vault, restart Creatio to use the new values.</div></div>
</li>
</ol>
<figure><figcaption>Fig. 2 An example of filled-in keys in Vault<!-- --> <a id="" name=""></a></figcaption><div class=img-cotainer><img src=https://academy.creatio.com/docs/sites/en/files/images/Setup_and_Administration/vault/vault_keys.png alt="Fig. 2 An example of filled-in keys in Vault"></div></figure>
<p>This example uses the data from the following line in the ConnectionStrings.config file:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-xml codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>add</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>name</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>dbPostgreSql</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>connectionString</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>Pooling=true; Database=SOME_DB_NAME; Host=SOME_DB_HOST; Username=SOME_USER; Password=SOME_PASSWORD; Port=SOME_DB_PORT; Timeout=5; CommandTimeout=400</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>where:</p>
<ul>
<li>DbHost is the DB server address that matches the Host parameter with the value of SOME_DB_HOST.</li>
<li>DbPort is the DB server port that matches the Port parameter with the value of SOME_DB_PORT.</li>
<li>DbName is the DB server name that matches the Database parameter with the value of SOME_DB_NAME.</li>
<li>Username is the DB username that matches the Username parameter with the value of SOME_USER.</li>
<li>Password is the DB password that matches the Password parameter with the value of SOME_PASSWORD.</li>
</ul>
<p>Learn more: <a href=https://learn.hashicorp.com/tutorials/vault/versioned-kv target=_blank rel="noopener noreferrer">Versioned Key/Value Secrets Engine</a> (official Vault documentation).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-5>Set up the security policy<a href=#title-3786-5 class=hash-link aria-label="Direct link to Set up the security policy" title="Direct link to Set up the security policy">​</a></h3>
<p>Since Vault can store different types of sensitive information, we recommend creating separate security policies to control the access levels for the specified keys. Creatio’s access privileges to the secrets engine must be read-only.</p>
<p>In the future, you can use these policies when generating authorization client tokens or when adding client certificates to Vault.</p>
<p>A policy that gives Creatio read access to all secrets in the secrets engine with the  <code>&lt;secretsEnginePath></code> path is as follows:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-xml codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token plain">path "</span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>secretsEnginePath</span><span class="token tag punctuation" style=color:#393A34>></span><span class="token plain">/*" {capabilities = ["read", "list"] }</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>where  <code>&lt;secretsEnginePath></code> is the path to the <a href=#title-3786-2>secrets engine</a>.</p>
<p>Learn more: <a href=https://www.vaultproject.io/docs/concepts/policies target=_blank rel="noopener noreferrer">Policies</a> (official Vault documentation).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-6>Set up Vault authorization<a href=#title-3786-6 class=hash-link aria-label="Direct link to Set up Vault authorization" title="Direct link to Set up Vault authorization">​</a></h3>
<p>Creatio supports the following Vault authorization types:</p>
<ul>
<li>by client certificate</li>
<li>by token.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-7>Set up certificate authorization<a href=#title-3786-7 class=hash-link aria-label="Direct link to Set up certificate authorization" title="Direct link to Set up certificate authorization">​</a></h4>
<ol>
<li>Issue a sseparate <a href=https://www.vaultproject.io/docs/auth/cert target=_blank rel="noopener noreferrer">client certificate</a> and register it on the Creatio host machine.</li>
<li>Add the certificate to Vault as the authorization method.</li>
<li>Specify the <a href=#title-3786-5>policy</a> to read the secrets with the data from the connection strings.</li>
</ol>
<p>Learn more: <a href=https://www.vaultproject.io/docs/auth target=_blank rel="noopener noreferrer">Auth Methods</a> (official Vault documentation).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-8>Set up token authorization<a href=#title-3786-8 class=hash-link aria-label="Direct link to Set up token authorization" title="Direct link to Set up token authorization">​</a></h4>
<p>Vault generates a Root Token upon initialization. We strongly advise against using that token for authorization as it grants virtually unlimited privileges. For Creatio authorization, generate a client token with security policies that would only allow to read secrets meant to substitute the templates in the connection strings of your application.</p>
<p>To generate a client token for Creation authorization in Vault, run the following command:</p>
<div class="language-cli codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cli codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token plain">vault token create -policy=&lt;policyName></span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>where  <code>&lt;policyName></code> is the name of the <a href=#title-3786-5>security policy</a>.</p>
<p>Learn more: <a href=https://www.vaultproject.io/docs/concepts/tokens target=_blank rel="noopener noreferrer">Tokens</a>, <a href=https://www.vaultproject.io/docs/commands/token/create target=_blank rel="noopener noreferrer">Token create - Command</a> (official Vault documentation).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-9>Settings on the Creatio side<a href=#title-3786-9 class=hash-link aria-label="Direct link to Settings on the Creatio side" title="Direct link to Settings on the Creatio side">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-17>Set up Vault connection parameters<a href=#title-3786-17 class=hash-link aria-label="Direct link to Set up Vault connection parameters" title="Direct link to Set up Vault connection parameters">​</a></h3>
<p>Vault connection settings must be specified in the vaultConfig section of the <strong>web.config</strong> file in the Creatio root folder. The parameters of the section are described in the table below:</p>
<table><tr><th><p>Parameter name<th><p>Details<th><p>Value<tr><td><p>hostUri<td><p>A string with the address of the Vault server<td><p>The pattern: <code>https://&lt;Vault server address>:&lt;Vault server port></code>.<tr><td><p>authMethodType<td><p>Authorization type<td><p>Acceptable values: <strong>Token</strong>. Authorize by token. <strong>Cert</strong>. Authorize by certificate.<tr><td><p>secretsEnginePath<td><p>The path to the Vault secrets engine<td><p>We recommend using your website’s name as the value.<tr><td><p>token<td><p>A string with the client token.<td><p>Specified if authorizing by token.<tr><td><p>certFilePath<td><p>Path to the certificate. Creatio version 8.0.5 Atlas and later lets you store Vault authentication certificates in Windows Certificate Store. Also, the certificate can now be read both by the name and ThumbPrint.<td><p>Specified if authorizing by certificate.<tr><td><p>certPassword<td><p>The password for the certificate.<td><p>Specified if the certificate is password-protected, blank otherwise.</table>
<p>If an illegal value if specified as authMethodType, Creatio will throw an error.</p>
<div class="tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Token connection example<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Certificate connection example</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-xml codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>vaultConfig</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>hostUri</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>https://127.0.0.1:1024</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>authMethodType</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>Token</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>token</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>s.on3zJH6fXZlodRAYqgTXYEot</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>secretsEnginePath</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>&lt;secretsEnginePath></span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-xml codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>vaultConfig</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>hostUri</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>https://127.0.0.1:1024</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>authMethodType</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>Cert</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>certFilePath</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>&lt;path></span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>certPassword</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>&lt;password></span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>secretsEnginePath</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>&lt;secretsEnginePath></span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<p>where</p>
<ul>
<li><code>&lt;secretsEnginePath></code> is the path to the secrets engine</li>
<li><code>&lt;path></code> is the path to the certificate file</li>
<li><code>&lt;password></code> is the password to unlock the certificate file.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-18>Set up connection string templates<a href=#title-3786-18 class=hash-link aria-label="Direct link to Set up connection string templates" title="Direct link to Set up connection string templates">​</a></h3>
<p>The ConnectionStrings.config file must contain connection string templates for substitution with Vault secrets. Build templates by using the secret keys’ names enclosed in <strong>brackets</strong> instead of the secret values.</p>
<p>For example, if a connection string has a Password="somePassword" value, its template must reference it as Password="[DBPassword]", where DBPassword is the secret key’s name in Vault.</p>
<p>If a connection string has no secret data, leave it unchanged. In that case, the value of the string will not be substituted with its Vault counterpart.</p>
<p>For example, if the config file has the following connection string:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-xml codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>add</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>name</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>dbPostgreSql</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>connectionString</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>Pooling=true; Database=SOME_DB_NAME; Host=SOME_DB_HOST; Username=SOME_USER; Password=SOME_PASSWORD; Port=SOME_DB_PORT; Timeout=5; CommandTimeout=400</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>its template may look as follows:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-xml codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>add</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>name</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>dbPostgreSql</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>connectionString</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>Pooling=true; Database=[DbName]; Host=[DbHost]; Username=[Username]; Password=[Password]; Port=[DbPort]; Timeout=5; CommandTimeout=400</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>where DbHost, DbPort, DbName, Username, Password are the keys of the corresponding secrets stored in Vault.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-30>Enable flags<a href=#title-3786-30 class=hash-link aria-label="Direct link to Enable flags" title="Direct link to Enable flags">​</a></h3>
<p>To configure <strong>connection strings</strong> in the web.config file located in the Creatio root folder, add the following lines to the  <code>&lt;appSettings></code> section:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-xml codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>add</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>key</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>UseConnectionStringProvider</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>value</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>true</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>add</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>key</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>UseSecretsInConnectionStrings</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>value</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>true</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>If you also want to use <strong>encryption keys</strong> (AES), take the following steps:</p>
<ol>
<li>
<p>Add the  <code>&lt;appSettings>:&lt;add key="UseSecretsInEncryptionKeys" value="true" /></code> line to the section in the web.config file located in the Creatio root folder.</p>
</li>
<li>
<p>In the Vault secrets storage whose name is specified in the configuration file in the vaultConfig section → the secretsEnginePath parameter, add a secret named EncryptionKeys.</p>
</li>
<li>
<p>In the EncryptionKeys secret, add the keys with the values ​​specified in the Creatio configuration file:</p>
<ul>
<li>InitializationSecurityVector,</li>
<li>CurrentSecurityKey.</li>
</ul>
</li>
<li>
<p>Remove the InitializationSecurityVector and CurrentSecurityKey attributes from the configuration file.</p>
</li>
</ol>
<figure><figcaption>Fig. 3 Example of filled-in keys<!-- --> <a id="" name=""></a></figcaption><div class=img-cotainer><img src=https://academy.creatio.com/docs/sites/en/files/images/Setup_and_Administration/vault/aes_keys.png alt="Fig. 3 Example of filled-in keys"></div></figure>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class=admonitionHeading_TMsN>Important</div><div class=admonitionContent_vXIg><p>The names of the secret and keys must exactly match the ones above. If the flags are disabled, Vault will not correctly store sensitive data of Creatio.</div></div>
<p>Restart Creatio to apply the changes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-3786-20>Disable storage of keys in Vault<a href=#title-3786-20 class=hash-link aria-label="Direct link to Disable storage of keys in Vault" title="Direct link to Disable storage of keys in Vault">​</a></h2>
<p>To disable storage of AES keys in Vault, take the following steps:</p>
<ol>
<li>
<p>Add the following flags to the configuration file of Creatio:</p>
<ul>
<li>InitializationSecurityVector</li>
<li>CurrentSecurityKey.</li>
</ul>
<p>The values ​​of the keys are stored in the Vault secrets engine whose name is specified in the configuration file in the vaultConfig section → the secretsEnginePath parameter → the EncryptionKeys secret:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-xml codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>add</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>key</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>InitializationSecurityVector</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>value</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>Vault_key_value</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>add</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>key</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>CurrentSecurityKey</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>value</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>Vault_key_value</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p>Disable the UseSecretsInEncryptionKeys flag in the Creatio configuration file:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-xml codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token tag punctuation" style=color:#393A34>&lt;</span><span class="token tag" style=color:#00009f>add</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>key</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>UseSecretsInEncryptionKeys</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag attr-name" style=color:#00a4db>value</span><span class="token tag attr-value punctuation attr-equals" style=color:#393A34>=</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag attr-value" style=color:#e3116c>false</span><span class="token tag attr-value punctuation" style=color:#393A34>"</span><span class="token tag" style=color:#00009f> </span><span class="token tag punctuation" style=color:#393A34>/></span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p>Restart Creatio to apply the changes.</p>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=see-also>See also<a href=#see-also class=hash-link aria-label="Direct link to See also" title="Direct link to See also">​</a></h2>
<p><a href="https://academy.creatio.com/documents?id=2138" target=_blank rel="noopener noreferrer">Modify ConnectionStrings.config for MS SQL Server</a></p>
<p><a href="https://academy.creatio.com/documents?id=2139" target=_blank rel="noopener noreferrer">Modify ConnectionStrings.config for Oracle Database</a></p>
<p><a href="https://academy.creatio.com/documents?id=2140" target=_blank rel="noopener noreferrer">Modify ConnectionStrings.config for PostgreSQL</a></p>
<p><a href="https://academy.creatio.com/documents?id=2120" target=_blank rel="noopener noreferrer">Prepare to deploy Creatio .NET Core on Linux</a></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/content-security-policy><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Content security policy</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/8.x/setup-and-administration/8.2/administration/security-settings/host-header-protection><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Host header protection</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#title-3786-21 class="table-of-contents__link toc-highlight">Steps on the Vault side</a><ul><li><a href=#title-3786-1 class="table-of-contents__link toc-highlight">Deploy and run the Vault server</a><li><a href=#title-3786-2 class="table-of-contents__link toc-highlight">Create a storage for secret keys</a><li><a href=#title-3786-3 class="table-of-contents__link toc-highlight">Create secret keys</a><li><a href=#title-3786-5 class="table-of-contents__link toc-highlight">Set up the security policy</a><li><a href=#title-3786-6 class="table-of-contents__link toc-highlight">Set up Vault authorization</a></ul><li><a href=#title-3786-9 class="table-of-contents__link toc-highlight">Settings on the Creatio side</a><ul><li><a href=#title-3786-17 class="table-of-contents__link toc-highlight">Set up Vault connection parameters</a><li><a href=#title-3786-18 class="table-of-contents__link toc-highlight">Set up connection string templates</a><li><a href=#title-3786-30 class="table-of-contents__link toc-highlight">Enable flags</a></ul><li><a href=#title-3786-20 class="table-of-contents__link toc-highlight">Disable storage of keys in Vault</a><li><a href=#see-also class="table-of-contents__link toc-highlight">See also</a></ul></div></div></div></div></main></div></div></div></div><footer class=footer><div class=footer__top><div class="container container-fluid"><div class=footer__cont><div class=footer__logo><img src=/docs/8.x/img/accelerate.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width=271.4 height=38><img src=/docs/8.x/img/accelerate.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width=271.4 height=38></div><div class="row footer__links"><div class="col footer__col"><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.facebook.com/CreatioCompany target=_blank rel="noopener noreferrer" class=footer__link-item>Facebook<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.linkedin.com/company/creatioglobal target=_blank rel="noopener noreferrer" class=footer__link-item>LinkedIn<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.youtube.com/c/creatio target=_blank rel="noopener noreferrer" class=footer__link-item>YouTube<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.twitter.com/Creatio_Global target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.owler.com/company/Creatio target=_blank rel="noopener noreferrer" class=footer__link-item>Owler<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Connect with us</div><ul class="footer__items clean-list"><li class=footer__item><a href="tel:+1 617 765 7997" target=_blank rel="noopener noreferrer" class=footer__link-item>US: +1 617 765 7997</a><li class=footer__item><a href="tel:+44 20 3384 0040" target=_blank rel="noopener noreferrer" class=footer__link-item>UK: +44 20 3384 0040</a><li class=footer__item><a href="tel:+61 261 452 888" target=_blank rel="noopener noreferrer" class=footer__link-item>AU: +61 261 452 888</a></ul></div><div class="col footer__col"><div class=footer__title> </div><ul class="footer__items clean-list"><li class=footer__item><a href=mailto:info@creatio.com target=_blank rel="noopener noreferrer" class=footer__link-item>info@creatio.com</a><li class=footer__item><a href=mailto:info@creatio.com target=_blank rel="noopener noreferrer" class=footer__link-item>support@creatio.com</a></ul></div></div></div></div></div><div class=footer__bottom><div class="container container-fluid"><div class=footer__copyright>© 2025 Creatio. All rights reserved.  |  <a href=https://www.creatio.com/privacy-policy target=_blank>Privacy Policy</a></div></div></div></footer></div>