<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-admin docs-version-8.0 docs-doc-page docs-doc-id-undefined" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Manage resource-intensive queries | Creatio Academy</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://academy.creatio.com/docs/8.x/img/OG-Creatio-Docs.jpg><meta data-rh=true name=twitter:image content=https://academy.creatio.com/docs/8.x/img/OG-Creatio-Docs.jpg><meta data-rh=true property=og:url content=https://academy.creatio.com/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/manage_resource_intensive_queries><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=8.0><meta data-rh=true name=docusaurus_tag content=docs-admin-8.0><meta data-rh=true name=docsearch:version content=8.0><meta data-rh=true name=docsearch:docusaurus_tag content=docs-admin-8.0><meta data-rh=true property=og:title content="Manage resource-intensive queries | Creatio Academy"><meta data-rh=true name=description content="This functionality is available for Creatio version 8.0.4 and later."><meta data-rh=true property=og:description content="This functionality is available for Creatio version 8.0.4 and later."><link data-rh=true rel=icon href=/docs/8.x/img/favicon.ico><link data-rh=true rel=canonical href=https://academy.creatio.com/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/manage_resource_intensive_queries><link data-rh=true rel=alternate href=https://academy.creatio.com/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/manage_resource_intensive_queries hreflang=en><link data-rh=true rel=alternate href=https://academy.creatio.com/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/manage_resource_intensive_queries hreflang=x-default><link rel=preconnect href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var d=t.getElementsByTagName(a)[0],g=t.createElement(a);g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+r+("dataLayer"!=n?"&l="+n:""),d.parentNode.insertBefore(g,d)}(window,document,"script","dataLayer","GTM-5C6KM9TP")</script><link rel=stylesheet href=/docs/8.x/assets/css/styles.1cb72ea6.css><script src=/docs/8.x/assets/js/runtime~main.46e08d89.js defer></script><script src=/docs/8.x/assets/js/main.c9889561.js defer></script><body class=navigation-with-keyboard><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C6KM9TP" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript>


<script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/docs/8.x/img/logo-white.svg><link rel=preload as=image href=/docs/8.x/img/logo.svg><link rel=preload as=image href=/docs/8.x/img/accelerate.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class=navtop><div class=container-fluid><div class=navtop__content><div class=search><form method=get><input class=search__input type=text placeholder=Search name=search><input class=search__button type=submit value=Search></form><div class=search__toggle></div></div><ul class=sites><li class=sites__item><a href=https://www.creatio.com/ rel=nofollow target=_blank>Creatio</a><li class=sites__item><a href=https://community.creatio.com/ rel=nofollow target=_blank>Community</a><li class=sites__item><a href=https://marketplace.creatio.com/ rel=nofollow target=_blank>Marketplace</a><li class=sites__item><a href=https://knowledge-hub.creatio.com/ rel=nofollow target=_blank>Knowledge Hub</a></ul></div></div></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class="navbar__inner container-fluid"><div class=navbar__items><div class=navbar__toggle><span></span></div><a class="navbar__brand navbar__brand_mobile" href=/><img src=/docs/8.x/img/logo-white.svg alt="Creatio Academy"></a><a class=navbar__brand href=/><img src=/docs/8.x/img/logo.svg alt="Creatio Academy"></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/8.x/>Guides</a><a href=https://academy.creatio.com/e-learning target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">E-learning</a><a href=https://academy.creatio.com/training target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Training</a><a href=https://academy.creatio.com/certification target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Certification</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/manage_resource_intensive_queries>8.0</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/8.x/setup-and-administration/administration/user-and-access-management/user-access-overview>8.3</a><li><a class=dropdown__link href=/docs/8.x/setup-and-administration/8.2/administration/user-and-access-management/user-access-overview>8.2</a><li><a class=dropdown__link href=/docs/8.x/setup-and-administration/8.1/administration/user-and-access-management/user-access-overview>8.1</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/manage_resource_intensive_queries>8.0</a></ul></div></div><div class="navbar__items navbar__items--right"><div class=search><form method=get><input class=search__input type=text placeholder=Search name=search><input class=search__button type=submit value=Search></form><div class=search__toggle></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_bSxm><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=container-fluid><div class=docRoot_cWv0><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="doc-menu sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/8.x/setup-and-administration/8.0/category/administration>Administration</a><button aria-label="Collapse sidebar category 'Administration'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/setup-and-administration/8.0/category/user-and-access-management>User and access management</a><button aria-label="Expand sidebar category 'User and access management'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/setup-and-administration/8.0/category/logging-tools>Logging tools</a><button aria-label="Expand sidebar category 'Logging tools'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/setup-and-administration/8.0/category/licensing>Licensing</a><button aria-label="Expand sidebar category 'Licensing'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/setup-and-administration/8.0/category/email-domain-verification>Email domain verification</a><button aria-label="Expand sidebar category 'Email domain verification'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/setup-and-administration/8.0/category/security-settings>Security settings</a><button aria-label="Expand sidebar category 'Security settings'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/8.x/setup-and-administration/8.0/category/creatio-maintenance>Creatio maintenance</a><button aria-label="Collapse sidebar category 'Creatio maintenance'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/clean_up_the_drive_space>Clean up the drive space</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/compile_app_on_web_farm>Compile an app on a web farm</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/process_complex_database_queries_faster>Improve page loading time</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/limit_DB_thread_count>Limit thread count for DB queries</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/manage_resource_intensive_queries>Query management rules</a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/setup-and-administration/8.0/category/on-site-deployment>On-site deployment</a><button aria-label="Expand sidebar category 'On-site deployment'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_z5aJ"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role=alert><div>This is documentation for Creatio <b>8.0</b>.</div><div class=margin-top--md>For up-to-date documentation, see the <b><a href=/docs/8.x/setup-and-administration/administration/user-and-access-management/user-access-overview>latest version</a></b> (<!-- -->8.3<!-- -->).</div></div><div class=docItemContainer_c0TR><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/docs/8.x/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/8.x/setup-and-administration/8.0/category/administration><span itemprop=name>Administration</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/8.x/setup-and-administration/8.0/category/creatio-maintenance><span itemprop=name>Creatio maintenance</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Query management rules</span><meta itemprop=position content=3></ul></nav><div class=creatio-tags><div class=creatio-tags__content><span class="theme-doc-version-badge badge badge--secondary">Version: 8.0</span><span class="theme-doc-version-badge badge badge--secondary badge--product docItemHeaderTag_avu7">All Creatio products</span></div></div><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Manage resource-intensive queries</h1></header>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class=admonitionHeading_TMsN>note</div><div class=admonitionContent_vXIg><p>This functionality is available for Creatio version 8.0.4 and later.</div></div>
<p>Execution of resource-intensive business operations (queries) can utilize a significant amount of database resources, which often leads to lower Creatio performance for all users. Such operations include:</p>
<ul>
<li><strong>Queries that filter strings by the "contains" mask</strong>. For example, standard filter that has the "Name contains %Jane%" condition in the <strong>Contacts</strong> section.</li>
<li><strong>Unfiltered, non-paginated queries</strong> generated using OData service or server-side Creatio development tools. For example, "get all contacts" query executed when you have more than 20,000 contact records.</li>
<li><strong>Queries sorted by a non-indexed column</strong>.For example, <strong>Contacts</strong> section records sorted by the custom <strong>Account country</strong> column, for which no index has been created in the database.</li>
<li><strong>Queries sorted by complex columns that contain a subquery</strong> For example, <strong>Accounts</strong> section records sorted by the column with feedback: the sum of sales for the last year for sales related to the account.</li>
</ul>
<p>To detect such queries, Creatio uses templates stored in the <strong>Query detector</strong> lookup.</p>
<p>You can apply multiple actions to resource-intensive queries to reduce the load on the database significantly and free up resources for user activity and operation of other Creatio elements. These actions are listed in the <strong>Query action</strong> lookup.</p>
<ul>
<li><strong>Limit query execution time</strong>. Cancel the query after the time limit specified in the "Query execution timeout" ("QueryExecutionTimeout" code) system setting passes.</li>
<li><strong>Logging</strong>. Log only query data to the <strong>Query rule apply log</strong> lookup. This helps to track the problematic queries.</li>
<li><strong>Limit the number of threads</strong>. Limit the number of threads to execute the request to the value specified in the "MaxDopQueryHint thread count" ("MaxDopHintThreadsCount" code) system setting. We recommend using a quarter to a half of total available threads, assuming one thread corresponds to one CPU core. This way, resource-intensive operations will be unable to take all available threads.</li>
<li><strong>Cancel execution</strong>. Cancel the query immediately.</li>
</ul>
<div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class=admonitionHeading_TMsN>Important</div><div class=admonitionContent_vXIg><p>We do not recommend changing the contents of the <strong>Query detector</strong> and <strong>Query action</strong> lookups. This can lead to violations of query handling rules.</div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-2516-1>Configure query handling rules<a href=#title-2516-1 class=hash-link aria-label="Direct link to Configure query handling rules" title="Direct link to Configure query handling rules">​</a></h2>
<p>You can restrict the handling of heavy queries to improve database performance. To do this, define the type of the heaviest queries in your Creatio application and set rules that restrict their execution.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class=admonitionHeading_TMsN>note</div><div class=admonitionContent_vXIg><p>A system administrator or user who has permissions to execute the "Can manage query rules" ("CanManageQueryRules" code) system operation can configure the rules.</div></div>
<p>The basic rule structure looks as follows:</p>
<div class="language-cli codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cli codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token plain">If the query goes to the &lt;name> table, the table contains more than &lt;n> rows, and the query matches the &lt;query detector> template, then the &lt;query action> action must be applied to the query.</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>To set up a rule:</p>
<ol>
<li>
<p>Click <img decoding=async loading=lazy src=https://academy.creatio.com/docs/sites/en/files/images/NoCodePlatform/business_rules/btn_system_designer.png alt="" class=img_ev3q> → System Designer.</p>
</li>
<li>
<p>Click <strong>Lookups</strong>.</p>
</li>
<li>
<p>Open the <strong>Query handle rule</strong> lookup.</p>
</li>
<li>
<p>Click <strong>Add</strong>.</p>
</li>
<li>
<p>Fill out the rule parameters:</p>
<ol>
<li>
<p>Enter a unique rule name in the <strong>Name</strong> parameter. Required.</p>
</li>
<li>
<p>Specify the schema (database table) to which the query must be executed in the <strong>Entity schema</strong> parameter. If no schema is specified, Creatio applies the rule to all schemas.</p>
</li>
<li>
<p>Set the minimum number of table rows required for the rule to apply in the <strong>Min row count</strong> parameter. Minimum value: 1000. Required.</p>
</li>
<li>
<p>Select the template of the query type to which to apply the rule in the <strong>Query Detector</strong> parameter. Available values are stored in the <strong>Query Detector</strong> lookup. Required.</p>
</li>
<li>
<p>Select the action to apply to the query in the <strong>Query Action</strong> parameter. Available values are stored in the [Query Action] lookup. Required.</p>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class=admonitionHeading_TMsN>note</div><div class=admonitionContent_vXIg><p><strong>System</strong> checkbox determines the rule editability and priority. System rules can be configured only by cloud administrators in accordance with the cloud policies and restrictions. These rules are mandatory and cannot be modified or deleted by Creatio users.</div></div>
</li>
<li>
<p>Specify the rule availability in the <strong>Active</strong> — determines whether the rule is used or not.</p>
</li>
<li>
<p>Specify whether to log the Stack trace of the call of the operation that executes the query to which the rule was applied in the <strong>Log stack trace</strong> parameter. Logs are saved to the <strong>Query rule apply log</strong> lookup.</p>
</li>
<li>
<p>Specify whether to log the query execution time in the <strong>Log query execution time</strong> parameter.</p>
</li>
</ol>
</li>
<li>
<p>Save the changes.</p>
</li>
<li>
<p>Repeat steps 4–6 for other needed rules.</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-2516-2>Execute rules<a href=#title-2516-2 class=hash-link aria-label="Direct link to Execute rules" title="Direct link to Execute rules">​</a></h2>
<p>Rule priorities are based on the detector, system character, schema (table), and number of table rows. When the query is executed, Creatio checks the following:</p>
<ul>
<li>query detectors used</li>
<li>entity schema and row number</li>
<li>whether <strong>System</strong> checkbox is set</li>
</ul>
<p>If multiple rules apply to the same query detector and entity schema, Creatio applies only one system and one regular rule that match the most closely.</p>
<p>The examples below explain how rules affect the execution of resource-intensive queries. In the examples, the following set of rules is configured in Creatio.</p>
<table><tr><th><p>Entity schema<th><p>Min number of rows<th><p>Query detector<th><p>Query action<th><p>Is System<th><p>Is Active<tr><th colspan=6><p>Like 1 rule<tr><td><p>Not set<td><p>20000<td><p>Text filter detector by pattern "%..."<td><p>Limit query execution time<td><p>No<td><p>Yes<tr><th colspan=6><p>Like 2 rule<tr><td><p>Not set<td><p>500000<td><p>Text filter detector by pattern "%..."<td><p>Cancel execution<td><p>No<td><p>Yes<tr><th colspan=6><p>Index 1 rule<tr><td><p>Not set<td><p>10000<td><p>Not indexed column sorting detector<td><p>Limit query execution time<td><p>No<td><p>Yes<tr><th colspan=6><p>Index 2 rule<tr><td><p>Not set<td><p>500000<td><p>Not indexed column sorting detector<td><p>Cancel execution<td><p>No<td><p>Yes<tr><th colspan=6><p>Activity Like 1 rule<tr><td><p>Activity<td><p>20000<td><p>Text filter detector by pattern "%..."<td><p>Limit query execution time<td><p>No<td><p>Yes<tr><th colspan=6><p>Activity Like rule<tr><td><p>Activity<td><p>1000000<td><p>Text filter detector by pattern "%..."<td><p>Cancel execution<td><p>No<td><p>Yes<tr><th colspan=6><p>Activity Like sys rule<tr><td><p>Activity<td><p>10000<td><p>Text filter detector by pattern "%..."<td><p>Limit the number of threads<td><p>Yes<td><p>Yes<tr><th colspan=6><p>Activity no fil no pag sys rule<tr><td><p>Activity<td><p>10000<td><p>Not indexed column sorting detector<td><p>Limit the number of threads<td><p>Yes<td><p>Yes</table>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class=admonitionHeading_TMsN>note</div><div class=admonitionContent_vXIg><p>The user searches in the <strong>Contacts</strong> section by filtering "<strong>Full name</strong> contains <code>&lt;Jane></code>" and sorting by the non-indexed column <strong>Date of birth</strong>. The "Contacts" table has 100,000 entries.</div></div>
<p>The rule selection logic works as follows:</p>
<ul>
<li>The query fits two detectors: "Text filter detector by pattern "%..." and "Not indexed column sorting detector."</li>
<li>"Contact" entity schema has no specific rules.</li>
<li>Fitting rules have no system rules.</li>
</ul>
<p>As a result, the most suitable rule will be executed for each query detector.</p>
<table><tr><th><p>Entity schema<th><p>Min number of rows<th><p>Query detector<th><p>Query action<th><p>Is System<th><p>Is Active<tr><th colspan=6><p>Like 1 rule<tr><td><p>Not set<td><p>20000<td><p>Text filter detector by pattern "%..."<td><p>Limit query execution time<td><p>No<td><p>Yes<tr><th colspan=6><p>Index 1 rule<tr><td><p>Not set<td><p>10000<td><p>Not indexed column sorting detector<td><p>Limit query execution time<td><p>No<td><p>Yes</table>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class=admonitionHeading_TMsN>note</div><div class=admonitionContent_vXIg><p>The user searches in the <strong>Activities</strong> section using the filter "<strong>Name</strong> contains  <code>&lt;account></code>" and sorting by the non-indexed <strong>Created Date</strong> column. The "Activity" table has 120,000 entries.</div></div>
<p>The rule selection logic works as follows:</p>
<ul>
<li>The query fits two detectors: "Text filter detector by pattern "%..." and "Not indexed column sorting detector".</li>
<li>"Activity" entity schema has specific rules.</li>
<li>Fitting rules include system rules.</li>
</ul>
<p>As a result, the most suitable system rule and common rule will be executed for "Text filter detector by pattern "%..." query detector. Only the most suitable system rule will be executed for "Not indexed column sorting detector" because no common rules for this query detector were configured.</p>
<table><tr><th><p>Entity schema<th><p>Min number of rows<th><p>Query detector<th><p>Query action<th><p>Is System<th><p>Is Active<tr><tr><th colspan=6><p>Activity Like 1 rule<tr><td><p>Activity<td><p>20000<td><p>Text filter detector by pattern "%..."<td><p>Limit query execution time<td><p>No<td><p>Yes<tr><th colspan=6><p>Activity Like sys rule<tr><td><p>Activity<td><p>10000<td><p>Text filter detector by pattern "%..."<td><p>Limit the number of threads<td><p>Yes<td><p>Yes<tr><th colspan=6><p>Activity no fil no pag sys rule<tr><td><p>Activity<td><p>10000<td><p>Not indexed column sorting detector<td><p>Limit the number of threads<td><p>Yes<td><p>Yes</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-2516-3>Analyze rules execution<a href=#title-2516-3 class=hash-link aria-label="Direct link to Analyze rules execution" title="Direct link to Analyze rules execution">​</a></h2>
<p>Creatio stores the logged query execution data in the <strong>Query rule apply log</strong> lookup. For each of the configured rules, only the first operation for each of the users during the day is logged. This enables the administrator to identify Creatio bottlenecks and make appropriate changes based on the rules that are used most often.</p>
<p>In the log you can find the following information:</p>
<ul>
<li><strong>Schema name</strong>. The root schema (database table) to which the request is made.</li>
<li><strong>User login</strong>. The user who initiated the request.</li>
<li><strong>Last detection date</strong>. Date of the last rule triggering on request.</li>
<li><strong>Query detector</strong>. Query type template for which the rule was applied.</li>
<li><strong>Query action</strong>. The action that was applied to the request.</li>
<li><strong>Message</strong>. Information that additionally reveals the reasons for triggering the rules: the number of records in the table, as well as by what criterion the trigger was triggered (for example, which heavy filter for which column).</li>
<li><strong>Recommendation</strong>. A recommendation to the system administrator how to reduce the impact of the query (for example, depending on the detector, add an index to the column, clear irrelevant/historical data in the table, strengthen the filter, etc.).</li>
<li><strong>Execution time, sec</strong>. A query execution time in database (to log this parameter, column <strong>Log query execution time</strong> of Query handle rule must be set up to "Yes").</li>
</ul>
<p>To view the SQL text and stack trace of the query, you can use the <strong>Show SQL text</strong> and <strong>Show stack trace</strong> buttons, which are available after clicking on the log entry. This information may be needed to analyze the request in more detail and determine the functionality that generated it. Stack trace logging is off by default. But you can turn it on in the <strong>Query handle rule</strong> lookup.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=see-also>See also<a href=#see-also class=hash-link aria-label="Direct link to See also" title="Direct link to See also">​</a></h2>
<p><a href=https://academy.creatio.com/docs/calculator target=_blank rel="noopener noreferrer">System requirements calculator</a></p>
<p><a href="https://academy.creatio.com/documents?id=2407" target=_blank rel="noopener noreferrer">Limit the number of simultaneous DB queries</a></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/8.x/setup-and-administration/8.0/administration/creatio-maintenance/limit_DB_thread_count><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Limit thread count for DB queries</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/8.x/setup-and-administration/8.0/category/on-site-deployment><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>On-site deployment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#title-2516-1 class="table-of-contents__link toc-highlight">Configure query handling rules</a><li><a href=#title-2516-2 class="table-of-contents__link toc-highlight">Execute rules</a><li><a href=#title-2516-3 class="table-of-contents__link toc-highlight">Analyze rules execution</a><li><a href=#see-also class="table-of-contents__link toc-highlight">See also</a></ul></div></div></div></div></main></div></div></div></div><footer class=footer><div class=footer__top><div class="container container-fluid"><div class=footer__cont><div class=footer__logo><img src=/docs/8.x/img/accelerate.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width=271.4 height=38><img src=/docs/8.x/img/accelerate.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width=271.4 height=38></div><div class="row footer__links"><div class="col footer__col"><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.facebook.com/CreatioCompany target=_blank rel="noopener noreferrer" class=footer__link-item>Facebook<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.linkedin.com/company/creatioglobal target=_blank rel="noopener noreferrer" class=footer__link-item>LinkedIn<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.youtube.com/c/creatio target=_blank rel="noopener noreferrer" class=footer__link-item>YouTube<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.twitter.com/Creatio_Global target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.owler.com/company/Creatio target=_blank rel="noopener noreferrer" class=footer__link-item>Owler<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Connect with us</div><ul class="footer__items clean-list"><li class=footer__item><a href="tel:+1 617 765 7997" target=_blank rel="noopener noreferrer" class=footer__link-item>US: +1 617 765 7997</a><li class=footer__item><a href="tel:+44 20 3384 0040" target=_blank rel="noopener noreferrer" class=footer__link-item>UK: +44 20 3384 0040</a><li class=footer__item><a href="tel:+61 261 452 888" target=_blank rel="noopener noreferrer" class=footer__link-item>AU: +61 261 452 888</a></ul></div><div class="col footer__col"><div class=footer__title> </div><ul class="footer__items clean-list"><li class=footer__item><a href=mailto:info@creatio.com target=_blank rel="noopener noreferrer" class=footer__link-item>info@creatio.com</a><li class=footer__item><a href=mailto:info@creatio.com target=_blank rel="noopener noreferrer" class=footer__link-item>support@creatio.com</a></ul></div></div></div></div></div><div class=footer__bottom><div class="container container-fluid"><div class=footer__copyright>© 2025 Creatio. All rights reserved.  |  <a href=https://www.creatio.com/privacy-policy target=_blank>Privacy Policy</a></div></div></div></footer></div>