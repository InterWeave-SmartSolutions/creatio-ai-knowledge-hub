<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-8.0 docs-doc-page docs-doc-id-undefined" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>Copy hierarchical data | Creatio Academy</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://academy.creatio.com/docs/8.x/dev/img/OG-Creatio-Docs.jpg><meta data-rh=true name=twitter:image content=https://academy.creatio.com/docs/8.x/dev/img/OG-Creatio-Docs.jpg><meta data-rh=true property=og:url content=https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-operations-back-end/copy-hierarchical-data><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=8.0><meta data-rh=true name=docusaurus_tag content=docs-default-8.0><meta data-rh=true name=docsearch:version content=8.0><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-8.0><meta data-rh=true property=og:title content="Copy hierarchical data | Creatio Academy"><meta data-rh=true name=description content="Copy hierarchical data to copy both the database table records and the records of the connected tables. You can copy the hierarchical data of [ProductHierarchyDataStructureObtainer] and [ProductConditionHierarchyDataStructureObtainer] Creatio tables out-of-the-box. To copy the data of other tables, customize hierarchical data copying."><meta data-rh=true property=og:description content="Copy hierarchical data to copy both the database table records and the records of the connected tables. You can copy the hierarchical data of [ProductHierarchyDataStructureObtainer] and [ProductConditionHierarchyDataStructureObtainer] Creatio tables out-of-the-box. To copy the data of other tables, customize hierarchical data copying."><link data-rh=true rel=icon href=/docs/8.x/dev/img/favicon.ico><link data-rh=true rel=canonical href=https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-operations-back-end/copy-hierarchical-data><link data-rh=true rel=alternate href=https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-operations-back-end/copy-hierarchical-data hreflang=en><link data-rh=true rel=alternate href=https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-operations-back-end/copy-hierarchical-data hreflang=x-default><link rel=preconnect href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var d=t.getElementsByTagName(a)[0],g=t.createElement(a);g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+r+("dataLayer"!=n?"&l="+n:""),d.parentNode.insertBefore(g,d)}(window,document,"script","dataLayer","GTM-5C6KM9TP")</script><link rel=stylesheet href=/docs/8.x/dev/assets/css/styles.89ecc891.css><script src=/docs/8.x/dev/assets/js/runtime~main.1fca6f6f.js defer></script><script src=/docs/8.x/dev/assets/js/main.020f5612.js defer></script><body class=navigation-with-keyboard><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C6KM9TP" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript>


<script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/docs/8.x/dev/img/logo-white.svg><link rel=preload as=image href=/docs/8.x/dev/img/logo.svg><link rel=preload as=image href=https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/HierarchyData/scr_class_diagram.png><link rel=preload as=image href=/docs/8.x/dev/img/accelerate.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class=navtop><div class=container-fluid><div class=navtop__content><div class=search><form method=get><input class=search__input type=text placeholder=Search name=search><input class=search__button type=submit value=Search></form><div class=search__toggle></div></div><ul class=sites><li class=sites__item><a href=https://www.creatio.com/ rel=nofollow target=_blank>Creatio</a><li class=sites__item><a href=https://community.creatio.com/ rel=nofollow target=_blank>Community</a><li class=sites__item><a href=https://marketplace.creatio.com/ rel=nofollow target=_blank>Marketplace</a><li class=sites__item><a href=https://knowledge-hub.creatio.com/ rel=nofollow target=_blank>Knowledge Hub</a></ul></div></div></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class="navbar__inner container-fluid"><div class=navbar__items><div class=navbar__toggle><span></span></div><a class="navbar__brand navbar__brand_mobile" href=/><img src=/docs/8.x/dev/img/logo-white.svg alt="Creatio Academy"></a><a class=navbar__brand href=/><img src=/docs/8.x/dev/img/logo.svg alt="Creatio Academy"></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/8.x/dev/>Guides</a><a href=https://academy.creatio.com/e-learning target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">E-learning</a><a href=https://academy.creatio.com/training target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Training</a><a href=https://academy.creatio.com/certification target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Certification</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-operations-back-end/copy-hierarchical-data>8.0</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/8.x/dev/development-on-creatio-platform/back-end-development/data-operations-back-end/copy-hierarchical-data>8.3</a><li><a class=dropdown__link href=/docs/8.x/dev/development-on-creatio-platform/8.2/back-end-development/data-operations-back-end/copy-hierarchical-data>8.2</a><li><a class=dropdown__link href=/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/data-operations-back-end/copy-hierarchical-data>8.1</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-operations-back-end/copy-hierarchical-data>8.0</a></ul></div></div><div class="navbar__items navbar__items--right"><div class=search><form method=get><input class=search__input type=text placeholder=Search name=search><input class=search__button type=submit value=Search></form><div class=search__toggle></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_bSxm><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=container-fluid><div class=docRoot_cWv0><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="doc-menu sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/getting-started>Getting started</a><button aria-label="Expand sidebar category 'Getting started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/architecture>Architecture</a><button aria-label="Expand sidebar category 'Architecture'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/development-tools>Development tools</a><button aria-label="Expand sidebar category 'Development tools'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/back-end-development>Back-end development</a><button aria-label="Collapse sidebar category 'Back-end development'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/replacing-class-factory>Replacing class factory</a><button aria-label="Expand sidebar category 'Replacing class factory'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/data-operations-back-end>Data operations (back-end)</a><button aria-label="Collapse sidebar category 'Data operations (back-end)'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/background-operations>Background operations</a><button aria-label="Expand sidebar category 'Background operations'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/direct-access>Direct access</a><button aria-label="Expand sidebar category 'Direct access'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/orm>ORM</a><button aria-label="Expand sidebar category 'ORM'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-operations-back-end/complex-select-queries>Complex Select queries</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-operations-back-end/copy-hierarchical-data>Hierarchical data</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/web-services>Web services</a><button aria-label="Expand sidebar category 'Web services'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/objects-business-logic>Object events</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-storage-and-cache>Data storage and cache</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/localizable-resources>Localizable resources</a><button aria-label="Expand sidebar category 'Localizable resources'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/automatic-data-binding>Automatic data binding</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/file-management-api>File management API</a><button aria-label="Expand sidebar category 'File management API'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/net-class-libraries-of-platform-core>.NET classes reference</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/front-end-development>Front-end development</a><button aria-label="Expand sidebar category 'Front-end development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/platform-customization>Platform customization</a><button aria-label="Expand sidebar category 'Platform customization'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/integrations-tools>Integrations tools</a><button aria-label="Expand sidebar category 'Integrations tools'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/mobile-app-development>Mobile app development</a><button aria-label="Expand sidebar category 'Mobile app development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_z5aJ"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role=alert><div>This is documentation for Creatio <b>8.0</b>.</div><div class=margin-top--md>For up-to-date documentation, see the <b><a href=/docs/8.x/dev/development-on-creatio-platform/back-end-development/data-operations-back-end/copy-hierarchical-data>latest version</a></b> (<!-- -->8.3<!-- -->).</div></div><div class=docItemContainer_c0TR><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/docs/8.x/dev/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/back-end-development><span itemprop=name>Back-end development</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/8.x/dev/development-on-creatio-platform/8.0/data-operations-back-end><span itemprop=name>Data operations (back-end)</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Hierarchical data</span><meta itemprop=position content=3></ul></nav><div class=creatio-tags><div class=creatio-tags__content><span class="theme-doc-version-badge badge badge--secondary">Version: 8.0</span></div></div><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Copy hierarchical data</h1></header><div class=difficulty-level><span class=difficulty-level-advanced>Level: <!-- -->advanced</span></div>
<p><strong>Copy hierarchical data</strong> to copy both the database table records and the records of the connected tables. You can copy the hierarchical data of <code>[ProductHierarchyDataStructureObtainer]</code> and <code>[ProductConditionHierarchyDataStructureObtainer]</code> Creatio tables out-of-the-box. To copy the data of other tables, customize hierarchical data copying.</p>
<p>You can use hierarchical copying in a <a href="https://academy.creatio.com/documents?ver=8.0&id=15262" target=_blank rel="noopener noreferrer">custom web service</a>. For example, if you copy data from an external service to Creatio or connect to an external database.</p>
<p>For example, the <strong>Products</strong> section is based on the <code>[Product]</code> database table. The product page contains custom details. If you copy the section records hierarchically, Creatio will copy the data of both the record and the connected details.</p>
<p>Creatio applies the table's <a href="https://academy.creatio.com/documents?ver=8.0&id=262" target=_blank rel="noopener noreferrer">access permissions</a> when copying. For example, the user lacks access permissions to read and add records to the <code>[Contact]</code> table. If they try to copy hierarchical data, Creatio will not copy the record and notify them that it is impossible to execute the operation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-1>Structure and operational procedure of hierarchical data copying<a href=#title-2143-1 class=hash-link aria-label="Direct link to Structure and operational procedure of hierarchical data copying" title="Direct link to Structure and operational procedure of hierarchical data copying">​</a></h2>
<p>View the <strong>components</strong> of hierarchical data copying in the table below.</p>
<p>Components of hierarchical data copying</p>
<table><tr><th><p>Name<th><p>Description<th><p>Classes and interfaces<tr><th><p>Controller<td><p>Controls the copying process<td><p><code>IHierarchyDataCopyingController</code> <code>HierarchyDataCopyingController</code> controls the copying of the database record and the connected database data.<tr><th><p>Obtainer<td><p>Obtains the structure of the current table and connected tables from the database<td><p><code>HierarchyDataStructureObtainerContext</code> selects the algorithm to obtain the hierarchical structure of the table and connected tables.
<code>IHierarchyDataStructureObtainer</code> <code>HierarchyDataStructureObtainer</code> obtains the hierarchical structure of the table and connected tables <code>BaseHierarchyDataStructureObtainer</code> <code>ProductHierarchyDataStructureObtainer</code> obtains the hierarchical structure of the <code>[Product]</code> table and connected tables.<tr><th><p>Container<td><p>Saves the structure of the current table and connected tables<td><p><code>HierarchyDataStructure</code> saves the information about the hierarchical data structure.<tr><th><p>Mapper<td><p>Manages the structure<td><p><code>IEntityCollectionMappingProcessor</code> <code>EntityCollectionMappingProcessor</code> obtains the structure from the database and copies data.</table>
<p>View the <strong>class chart</strong> of the hierarchical data copying on the figure below.</p>
<figure><figcaption> <a id="" name=""></a></figcaption><div class=img-cotainer><img src=https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/HierarchyData/scr_class_diagram.png alt=""></div></figure>
<p>The <strong>operating procedure</strong> of hierarchical data copying.</p>
<ol>
<li>
<p>The service class calls the copying process controller and passes the table name and ID of the original record to the controller.</p>
</li>
<li>
<p>The controller makes a copy in several stages:</p>
<ol>
<li>Retrieve the structure of the table and connected tables as a unified form.</li>
<li>Save the table structure as a unified form.</li>
</ol>
</li>
<li>
<p>The controller copies records according to the structure obtained on the saving stage.</p>
</li>
</ol>
<p>Saving as <strong>unified form</strong> saves the table structure to the object of the <code>HierarchyDataStructure</code> type. If the table has connected tables (a column links to the record of a different table via an external key), the controller will place them to the object (to the object collection of a similar type). Should you need to expand or update the structure obtainer mechanism, the unified form will let you process the new structure without additional modifications to the controller code.</p>
<p>See the template of the unified form the controller uses to save the table structure below.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_P25_>Template of the unified table structure form</div><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/* The class contains the hierarchical data structure. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">HierarchyDataStructure</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> SchemaName</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token class-name">List </span><span class="token class-name punctuation" style=color:#393A34>&lt;</span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token class-name punctuation" style=color:#393A34>></span><span class="token plain"> Columns</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* If the current structure object does not have a parent foreign table name, use null here. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> ParentColumnName</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* The child structure list. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token class-name">List </span><span class="token class-name punctuation" style=color:#393A34>&lt;</span><span class="token class-name">HierarchyDataStructure</span><span class="token class-name punctuation" style=color:#393A34>></span><span class="token plain"> Structures</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* The filter list. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token class-name">HierarchyDataStructureFilterGroup</span><span class="token plain"> Filters</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-2>Customize the hierarchical data copying<a href=#title-2143-2 class=hash-link aria-label="Direct link to Customize the hierarchical data copying" title="Direct link to Customize the hierarchical data copying">​</a></h2>
<p>You can customize hierarchical data copying in several ways:</p>
<ul>
<li>Add a custom data obtainer implementation (the <code>HierarchyDataStructureObtainer</code> class).</li>
<li>Modify the data obtainer implementation (the <code>HierarchyDataStructureObtainer</code> class).</li>
<li>Modify the controller implementation (the <code>HierarchyDataCopyingController</code> class).</li>
<li>Add a custom hierarchical data copying implementation.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-3>Add a custom data obtainer implementation<a href=#title-2143-3 class=hash-link aria-label="Direct link to Add a custom data obtainer implementation" title="Direct link to Add a custom data obtainer implementation">​</a></h3>
<p>The <strong>ways</strong> to add a custom data obtainer implementation (the <code>HierarchyDataStructureObtainer</code> class) are as follows:</p>
<ul>
<li>Use the base interface.</li>
<li>Inherit the base class.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-4>Use the base interface to add a custom data obtainer implementation<a href=#title-2143-4 class=hash-link aria-label="Direct link to Use the base interface to add a custom data obtainer implementation" title="Direct link to Use the base interface to add a custom data obtainer implementation">​</a></h4>
<ol>
<li>Create a class that implements the <code>IHierarchyDataStructureObtainer</code> interface. Name the class according to the following template: <code>[NameOfTheObjectToCopy]HierarchyDataStructureObtainer</code>.</li>
<li>Add a custom implementation of the <code>ObtainStructure()</code> interface method. Make sure to specify the <code>virtual</code> modifier.</li>
</ol>
<p>See the example of the data obtainer implementation that uses the base interface in the <strong>ProductBankCustomerJourney</strong> package → the <code>ProductHierarchyDataStructureObtainer</code> and <code>ProductConditionHierarchyDataStructureObtainer</code> classes.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-5>Inherit the base class to add a custom data obtainer implementation<a href=#title-2143-5 class=hash-link aria-label="Direct link to Inherit the base class to add a custom data obtainer implementation" title="Direct link to Inherit the base class to add a custom data obtainer implementation">​</a></h4>
<p>In this case, base implementation is the standard record copying process that does not affect the connected records. The <code>BaseHierarchyDataStructureObtainer</code> class of the base <strong>NUI</strong> package implements the obtainer.</p>
<ol>
<li>Create a class that implements the <code>BaseHierarchyDataStructureObtainer</code> interface (the <strong>NUI</strong> package → the <code>BaseHierarchyDataStructureObtainer</code> class). Name the class according to the following template: <code>[NameOfTheObjectToCopy]HierarchyDataStructureObtainer</code>.</li>
<li>Extend the base obtainer implementation</li>
</ol>
<p>See the example of the data obtainer implementation that inherits the base class in the <strong>ProductBankCustomerJourney</strong> package → the <code>ProductHierarchyDataStructureObtainer</code> class.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-6>Modify the data obtainer implementation<a href=#title-2143-6 class=hash-link aria-label="Direct link to Modify the data obtainer implementation" title="Direct link to Modify the data obtainer implementation">​</a></h3>
<ol>
<li>Create a class that <a href="https://academy.creatio.com/documents?ver=8.0&id=15221" target=_blank rel="noopener noreferrer">replaces</a> one of the following classes: <code>BaseHierarchyDataStructureObtainer</code> (the <strong>NUI</strong> package), <code>ProductConditionHierarchyDataStructureObtainer</code> (the <strong>ProductBankCustomerJourney</strong> package), <code>ProductHierarchyDataStructureObtainer</code> (the <strong>ProductBankCustomerJourney</strong> package).</li>
<li>Add a custom implementation of the base class's <code>ObtainStructure()</code> replacing method to the replacing class.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-7>Modify the controller implementation<a href=#title-2143-7 class=hash-link aria-label="Direct link to Modify the controller implementation" title="Direct link to Modify the controller implementation">​</a></h3>
<ol>
<li>
<p>Create a class that implements the <code>IHierarchyDataCopyingController</code> interface. Name the class according to the following template: <code>[ObjectName]HierarchyDataController</code>.</p>
</li>
<li>
<p>Add a custom copying algorithm to the <code>CopyRecord</code> interface method.</p>
<p>Call a single method of another class as part of a single algorithm step. Also, create a class object to call or minimally prepare data to pass to the method as part of the step.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-8>Add a custom hierarchical data copying implementation<a href=#title-2143-8 class=hash-link aria-label="Direct link to Add a custom hierarchical data copying implementation" title="Direct link to Add a custom hierarchical data copying implementation">​</a></h3>
<ol>
<li>
<p>Add an implementation of the <a href=#title-2143-7>copying process controller</a> (<code>HierarchyDataCopyingController</code> class). The controller must call the structure obtainer (<code>HierarchyDataStructureObtainer</code> class), the structure processor (<code>EntityCollectionMappingProcessor</code> class), the structure container (the <code>HierarchyDataStructure</code> class) gradually.</p>
</li>
<li>
<p>Add an implementation of the <a href=#title-2143-6>hierarchical data structure obtainer</a> (<code>HierarchyDataStructureObtainer</code> class).</p>
</li>
<li>
<p>Create a class that implements the interface. Name the class according to the following template: <code>[ObjectName]HierarchyDataProcessor</code>.</p>
<p>We recommend adding the processor class interface. This will let you add another implementation and replace the existing implementation, as well as unify the processors.</p>
</li>
<li>
<p>Create a class that implements the <code>IEntityCollectionMappingHandler</code> interface.</p>
</li>
<li>
<p>Add the calls to the structure obtainer (the <code>HierarchyDataStructureObtainer</code> class), structure processor (the <code>EntityCollectionMappingProcessor</code> class), structure container (the <code>HierarchyDataStructure</code> class) methods to the <code>CopyRecord</code> controller method.</p>
</li>
<li>
<p>Create the <code>HierarchyDataCopyingController</code> class object in the custom class.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_P25_>Example that creates the controller object</div><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> copyController </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ClassFactory</span><span class="token punctuation" style=color:#393A34>.</span><span class="token generic-method function" style=color:#d73a49>Get</span><span class="token generic-method generic class-name punctuation" style=color:#393A34>&lt;</span><span class="token generic-method generic class-name">HierarchyDataCopyingController</span><span class="token generic-method generic class-name punctuation" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ConstructorArgument</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"UserConnection"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p>Call the <code>copyController</code> copying method.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_P25_>Example that calls the copying method</div><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token plain">copyController</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>CopyRecord</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">schemaName</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> recordId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-9>Call hierarchical data copying<a href=#title-2143-9 class=hash-link aria-label="Direct link to Call hierarchical data copying" title="Direct link to Call hierarchical data copying">​</a></h2>
<p>You can call hierarchical data copying from the front-end and back-end.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-10>Call hierarchical copying from the front-end<a href=#title-2143-10 class=hash-link aria-label="Direct link to Call hierarchical copying from the front-end" title="Direct link to Call hierarchical copying from the front-end">​</a></h3>
<p>Use the <code>callService()</code> method to <strong>call hierarchical copying from front-end</strong>.</p>
<p>See the call example in the <strong>ProductBankCustomerJourney</strong> package → the <code>ProductConditionDetailV2</code> schema → the <code>callCopyRecordService()</code> method.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_P25_>Example that calls hierarchical copying from front-end</div><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/**</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>* Call the record copying service.</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>* @protected</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>*/</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">callCopyRecordService</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>function</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>showBodyMask</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> config </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>getCopyRecordConfig</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>callService</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">config</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">copyRecordServiceCallback</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>this</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-2143-11>Call hierarchical copying from the back-end<a href=#title-2143-11 class=hash-link aria-label="Direct link to Call hierarchical copying from the back-end" title="Direct link to Call hierarchical copying from the back-end">​</a></h3>
<p>Create the <code>HierarchyDataCopyingController</code> class object in a custom class to <strong>call hierarchical copying from back-end</strong>.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_P25_>Example that calls hierarchical copying from back-end</div><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> copyController </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ClassFactory</span><span class="token punctuation" style=color:#393A34>.</span><span class="token generic-method function" style=color:#d73a49>Get</span><span class="token generic-method generic class-name punctuation" style=color:#393A34>&lt;</span><span class="token generic-method generic class-name">HierarchyDataCopyingController</span><span class="token generic-method generic class-name punctuation" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ConstructorArgument</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"UserConnection"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>To <strong>manage table data using the column mapping</strong>:</p>
<ol>
<li>
<p>Create a mapper class object that implements the <code>IEntityCollectionMappingHandler</code> interface in a custom class.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_P25_>Example that creates a mapper class object</div><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> entityCollectionMappingHandler </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ClassFactory</span><span class="token punctuation" style=color:#393A34>.</span><span class="token generic-method function" style=color:#d73a49>Get</span><span class="token generic-method generic class-name punctuation" style=color:#393A34>&lt;</span><span class="token generic-method generic class-name">IEntityCollectionMappingHandler</span><span class="token generic-method generic class-name punctuation" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ConstructorArgument</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"userConnection"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p>Call the mapper methods via the object.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_P25_>Example that calls the copying method</div><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token plain">entityCollectionMappingHandler</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>CopyItems</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    data</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">SchemaName</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    columns</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    filterGroup</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    relatedColumnValues</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class=admonitionHeading_TMsN>note</div><div class=admonitionContent_vXIg><p>If you create an object using the interface name, the developer will be able to replace the existing mapper implementation using a custom implementation. If you modify the implementation of an existing mapper, Creatio will recompile only the mapper class. The classes that use the implementation do not need to be recompiled. Learn more about creating objects using the dependency implementation mechanism in a separate article: <a href="https://academy.creatio.com/documents?ver=8.0&id=15221" target=_blank rel="noopener noreferrer">Replace the configuration elements</a>.</div></div>
</li>
</ol>
<p>To <strong>obtain the structure of a particular table</strong> as an object of the <code>HierarchyDataStructure</code> type:</p>
<ol>
<li>
<p>Create a <code>HierarchyDataStructureObtainerContext</code> class object in the custom class.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_P25_>Example that creates the table structure obtainer</div><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> _hierarchyDataStructureObtainer </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ClassFactory</span><span class="token punctuation" style=color:#393A34>.</span><span class="token generic-method function" style=color:#d73a49>Get</span><span class="token generic-method generic class-name punctuation" style=color:#393A34>&lt;</span><span class="token generic-method generic class-name">HierarchyDataStructureObtainerContext</span><span class="token generic-method generic class-name punctuation" style=color:#393A34>></span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">ConstructorArgument</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"userConnection"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
</li>
<li>
<p>Obtain the structure of a particular table.</p>
<p>The <strong>ways</strong> to obtain the structure are as follows:</p>
<ul>
<li>Call the <code>ObtainStructureByObtainerStrategy</code> method and pass the <code>schemaName</code> parameter that contains the table name whose record to copy to the method.</li>
<li>Call the implementation of the existing structure obtainer: <code>ProductHierarchyDataStructureObtainer</code> or <code>ProductConditionHierarchyDataStructureObtainer</code>.</li>
</ul>
</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=see-also>See also<a href=#see-also class=hash-link aria-label="Direct link to See also" title="Direct link to See also">​</a></h2>
<p><a href="https://academy.creatio.com/documents?ver=8.0&id=15262" target=_blank rel="noopener noreferrer">Custom web services</a></p>
<p><a href="https://academy.creatio.com/documents?ver=8.0&id=262" target=_blank rel="noopener noreferrer">Object operation permissions</a> (user documentation)</p>
<p><a href="https://academy.creatio.com/documents?ver=8.0&id=15221" target=_blank rel="noopener noreferrer">Replacing class factory</a></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/data-operations-back-end/complex-select-queries><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Complex Select queries</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/8.x/dev/development-on-creatio-platform/8.0/category/web-services><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Web services</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#title-2143-1 class="table-of-contents__link toc-highlight">Structure and operational procedure of hierarchical data copying</a><li><a href=#title-2143-2 class="table-of-contents__link toc-highlight">Customize the hierarchical data copying</a><ul><li><a href=#title-2143-3 class="table-of-contents__link toc-highlight">Add a custom data obtainer implementation</a><li><a href=#title-2143-6 class="table-of-contents__link toc-highlight">Modify the data obtainer implementation</a><li><a href=#title-2143-7 class="table-of-contents__link toc-highlight">Modify the controller implementation</a><li><a href=#title-2143-8 class="table-of-contents__link toc-highlight">Add a custom hierarchical data copying implementation</a></ul><li><a href=#title-2143-9 class="table-of-contents__link toc-highlight">Call hierarchical data copying</a><ul><li><a href=#title-2143-10 class="table-of-contents__link toc-highlight">Call hierarchical copying from the front-end</a><li><a href=#title-2143-11 class="table-of-contents__link toc-highlight">Call hierarchical copying from the back-end</a></ul><li><a href=#see-also class="table-of-contents__link toc-highlight">See also</a></ul></div></div></div></div></main></div></div></div></div><footer class=footer><div class=footer__top><div class="container container-fluid"><div class=footer__cont><div class=footer__logo><img src=/docs/8.x/dev/img/accelerate.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width=271.4 height=38><img src=/docs/8.x/dev/img/accelerate.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width=271.4 height=38></div><div class="row footer__links"><div class="col footer__col"><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.facebook.com/CreatioCompany target=_blank rel="noopener noreferrer" class=footer__link-item>Facebook<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.linkedin.com/company/creatioglobal target=_blank rel="noopener noreferrer" class=footer__link-item>LinkedIn<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.youtube.com/c/creatio target=_blank rel="noopener noreferrer" class=footer__link-item>YouTube<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.twitter.com/Creatio_Global target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.owler.com/company/Creatio target=_blank rel="noopener noreferrer" class=footer__link-item>Owler<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Connect with us</div><ul class="footer__items clean-list"><li class=footer__item><a href="tel:+1 617 765 7997" target=_blank rel="noopener noreferrer" class=footer__link-item>US: +1 617 765 7997</a><li class=footer__item><a href="tel:+44 20 3384 0040" target=_blank rel="noopener noreferrer" class=footer__link-item>UK: +44 20 3384 0040</a><li class=footer__item><a href="tel:+61 261 452 888" target=_blank rel="noopener noreferrer" class=footer__link-item>AU: +61 261 452 888</a></ul></div><div class="col footer__col"><div class=footer__title> </div><ul class="footer__items clean-list"><li class=footer__item><a href=mailto:info@creatio.com target=_blank rel="noopener noreferrer" class=footer__link-item>info@creatio.com</a><li class=footer__item><a href=mailto:info@creatio.com target=_blank rel="noopener noreferrer" class=footer__link-item>support@creatio.com</a></ul></div></div></div></div></div><div class=footer__bottom><div class="container container-fluid"><div class=footer__copyright>© 2025 Creatio. All rights reserved.  |  <a href=https://www.creatio.com/privacy-policy target=_blank>Privacy Policy</a></div></div></div></footer></div>