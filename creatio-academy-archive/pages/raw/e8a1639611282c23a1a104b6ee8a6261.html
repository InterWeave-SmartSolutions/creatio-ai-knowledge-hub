<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-8.1 docs-doc-page docs-doc-id-undefined" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.7.0"><title data-rh=true>File management API | Creatio Academy</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://academy.creatio.com/docs/8.x/dev/img/OG-Creatio-Docs.jpg><meta data-rh=true name=twitter:image content=https://academy.creatio.com/docs/8.x/dev/img/OG-Creatio-Docs.jpg><meta data-rh=true property=og:url content=https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/api-for-file-management/overview><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=8.1><meta data-rh=true name=docusaurus_tag content=docs-default-8.1><meta data-rh=true name=docsearch:version content=8.1><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-8.1><meta data-rh=true property=og:title content="File management API | Creatio Academy"><meta data-rh=true name=description content="View a list of namespaces for file management API in the table below."><meta data-rh=true property=og:description content="View a list of namespaces for file management API in the table below."><link data-rh=true rel=icon href=/docs/8.x/dev/img/favicon.ico><link data-rh=true rel=canonical href=https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/api-for-file-management/overview><link data-rh=true rel=alternate href=https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/api-for-file-management/overview hreflang=en><link data-rh=true rel=alternate href=https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/api-for-file-management/overview hreflang=x-default><link rel=preconnect href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var d=t.getElementsByTagName(a)[0],g=t.createElement(a);g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+r+("dataLayer"!=n?"&l="+n:""),d.parentNode.insertBefore(g,d)}(window,document,"script","dataLayer","GTM-5C6KM9TP")</script><link rel=stylesheet href=/docs/8.x/dev/assets/css/styles.89ecc891.css><script src=/docs/8.x/dev/assets/js/runtime~main.1fca6f6f.js defer></script><script src=/docs/8.x/dev/assets/js/main.020f5612.js defer></script><body class=navigation-with-keyboard><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5C6KM9TP" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript>


<script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:"light",document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/docs/8.x/dev/img/logo-white.svg><link rel=preload as=image href=/docs/8.x/dev/img/logo.svg><link rel=preload as=image href=/docs/8.x/dev/img/accelerate.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class=navtop><div class=container-fluid><div class=navtop__content><div class=search><form method=get><input class=search__input type=text placeholder=Search name=search><input class=search__button type=submit value=Search></form><div class=search__toggle></div></div><ul class=sites><li class=sites__item><a href=https://www.creatio.com/ rel=nofollow target=_blank>Creatio</a><li class=sites__item><a href=https://community.creatio.com/ rel=nofollow target=_blank>Community</a><li class=sites__item><a href=https://marketplace.creatio.com/ rel=nofollow target=_blank>Marketplace</a><li class=sites__item><a href=https://knowledge-hub.creatio.com/ rel=nofollow target=_blank>Knowledge Hub</a></ul></div></div></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class="navbar__inner container-fluid"><div class=navbar__items><div class=navbar__toggle><span></span></div><a class="navbar__brand navbar__brand_mobile" href=/><img src=/docs/8.x/dev/img/logo-white.svg alt="Creatio Academy"></a><a class=navbar__brand href=/><img src=/docs/8.x/dev/img/logo.svg alt="Creatio Academy"></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/8.x/dev/>Guides</a><a href=https://academy.creatio.com/e-learning target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">E-learning</a><a href=https://academy.creatio.com/training target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Training</a><a href=https://academy.creatio.com/certification target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Certification</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-current=page class="navbar__link active" aria-haspopup=true aria-expanded=false role=button href=/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/api-for-file-management/overview>8.1</a><ul class=dropdown__menu><li><a class=dropdown__link href=/docs/8.x/dev/development-on-creatio-platform/back-end-development/api-for-file-management/overview>8.3</a><li><a class=dropdown__link href=/docs/8.x/dev/development-on-creatio-platform/8.2/back-end-development/api-for-file-management/overview>8.2</a><li><a aria-current=page class="dropdown__link dropdown__link--active" href=/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/api-for-file-management/overview>8.1</a><li><a class=dropdown__link href=/docs/8.x/dev/development-on-creatio-platform/8.0/back-end-development/api-for-file-management/overview>8.0</a></ul></div></div><div class="navbar__items navbar__items--right"><div class=search><form method=get><input class=search__input type=text placeholder=Search name=search><input class=search__button type=submit value=Search></form><div class=search__toggle></div></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_z2l0"><div class=docsWrapper_bSxm><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=container-fluid><div class=docRoot_cWv0><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class="doc-menu sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/getting-started>Getting started</a><button aria-label="Expand sidebar category 'Getting started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/architecture>Architecture</a><button aria-label="Expand sidebar category 'Architecture'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/development-tools>Development tools</a><button aria-label="Expand sidebar category 'Development tools'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/back-end-development>Back-end development</a><button aria-label="Collapse sidebar category 'Back-end development'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/types-visibility>.NET types visibility</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/replacing-class-factory>Replacing class factory</a><button aria-label="Expand sidebar category 'Replacing class factory'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/data-operations-back-end>Data operations (back-end)</a><button aria-label="Expand sidebar category 'Data operations (back-end)'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/web-services>Web services</a><button aria-label="Expand sidebar category 'Web services'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/objects-business-logic>Object events</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/data-storage-and-cache>Data storage and cache</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/localizable-resources>Localizable resources</a><button aria-label="Expand sidebar category 'Localizable resources'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/automatic-data-binding>Automatic data binding</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/file-management-api>File management API</a><button aria-label="Collapse sidebar category 'File management API'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/api-for-file-management/overview>Overview</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/file-management-references>References</a><button aria-label="Expand sidebar category 'References'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/8.x/dev/development-on-creatio-platform/8.1/back-end-development/net-class-libraries-of-platform-core>.NET classes reference</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/front-end-development>Front-end development</a><button aria-label="Expand sidebar category 'Front-end development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/platform-customization>Platform customization</a><button aria-label="Expand sidebar category 'Platform customization'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/integrations-tools>Integrations tools</a><button aria-label="Expand sidebar category 'Integrations tools'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/mobile-app-development>Mobile app development</a><button aria-label="Expand sidebar category 'Mobile app development'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_z5aJ"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role=alert><div>This is documentation for Creatio <b>8.1</b>.</div><div class=margin-top--md>For up-to-date documentation, see the <b><a href=/docs/8.x/dev/development-on-creatio-platform/back-end-development/api-for-file-management/overview>latest version</a></b> (<!-- -->8.3<!-- -->).</div></div><div class=docItemContainer_c0TR><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/docs/8.x/dev/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/back-end-development><span itemprop=name>Back-end development</span></a><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class=breadcrumbs__item><a class=breadcrumbs__link itemprop=item href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/file-management-api><span itemprop=name>File management API</span></a><meta itemprop=position content=2><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Overview</span><meta itemprop=position content=3></ul></nav><div class=creatio-tags><div class=creatio-tags__content><span class="theme-doc-version-badge badge badge--secondary">Version: 8.1</span></div></div><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_bxCs"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>File management API</h1></header><div class=difficulty-level><span class=difficulty-level-intermediate>Level: <!-- -->intermediate</span></div>
<p>View a list of namespaces for file management API in the table below.</p>
<table><tr><th><p>Namespace<th><p>Description<tr><td><p>Terrasoft.File.Abstractions<td><p>Determines the file management logic in Creatio.<tr><td><p>Terrasoft.File<td><p>Implements the abstractions used in Creatio.</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-1982-1>File locators<a href=#title-1982-1 class=hash-link aria-label="Direct link to File locators" title="Direct link to File locators">​</a></h2>
<p>A <strong>file locator</strong> determines the file location and implements the <code>Terrasoft.File.Abstractions.IFileLocator</code> interface. A file locator must contain a unique file identifier: <code>RecordId</code>.</p>
<p>Creatio lets you create different file locators for different file storages. Depending on the file storage, the file locator might have extra properties to identify the file location. For example, the <code>Terrasoft.File.EntityFileLocator</code> class implements the file locator for the current file storage. View the properties of the <code>EntityFileLocator</code> object in the table below.</p>
<table><tr><th><p>Property<th><p>Description<tr><td><p>RecordId<td><p>Includes a unique file identifier.<tr><td><p>EntitySchemaName<td><p>Includes the name of the object schema where the file is stored. For example, "ActivityFile," "CaseFile."</table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-1982-2>File structure<a href=#title-1982-2 class=hash-link aria-label="Direct link to File structure" title="Direct link to File structure">​</a></h2>
<p><strong>File</strong> in Creatio implements the <code>Terrasoft.File.Abstractions.IFile</code> interface whose methods let you manage files asynchronously, regardless of the file storage type. The <code>Terrasoft.File.Abstractions.FileUtils</code> class implements methods to manage files synchronously.</p>
<p>View the file structure supported by Creatio in the table below.</p>
<table><tr><th><p>Structure element<th><p>Description<th><p>Storage<tr><td><p>Metadata<td><p>File metadata includes file properties, such as file name, file size in bytes, file creation date. File metadata is based on the <code>Terrasoft.File.Abstractions.Metadata.FileMetadata</code> abstract class. For example, the <code>Terrasoft.File.Metadata.EntityFileMetadata</code> class implements the file metadata for files uploaded to the file storage.<td><p>The storage that implements the <code>Terrasoft.File.Abstractions.Metadata.IFileMetadataStorage</code> interface.<tr><td><p>Content<td><p>File content.<td><p>The storage that implements the <code>Terrasoft.File.Abstractions.Metadata.IFileContentStorage</code> interface.</table>
<p>The implementations of the <code>Terrasoft.File.Abstractions.Metadata.IFileMetadataStorage</code> and <code>Terrasoft.File.Abstractions.Metadata.IFileContentStorage</code> interfaces include specific features to interact with different file storages, such as server's file system, S3 file storage, Azure Blob file storage, Google Drive, etc.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-15282-1>Operations with files<a href=#title-15282-1 class=hash-link aria-label="Direct link to Operations with files" title="Direct link to Operations with files">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-1982-7>Access an existing file and create a new file<a href=#title-1982-7 class=hash-link aria-label="Direct link to Access an existing file and create a new file" title="Direct link to Access an existing file and create a new file">​</a></h3>
<p>The <code>Terrasoft.File.Abstractions.IFileFactory</code> interface implements methods to create and retrieve objects of a class that implements the <code>Terrasoft.File.Abstractions.IFile</code> interface. To access the <code>Terrasoft.File.Abstractions.IFileFactory</code> interface, use the methods of the <code>Terrasoft.File.File.FileFactoryUtils</code> class that extends the <code>UserConnection</code> class. Therefore, file management requires an instance of the <code>UserConnection</code> or <code>SystemUserConnection</code> class.</p>
<p>Since the file locator determines the file location, specify the <code>RecordId</code> file identifier to <strong>access an existing file</strong>.</p>
<p>View the examples that access existing files below.</p>
<div class="tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Access the existing file (option 1)<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Access the existing file (option 2)</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/* Retrieve the instance of the file factory. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFileFactory</span><span class="token plain"> fileFactory </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>GetFileFactory</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create the "EntityFileLocator" instance identified by "recordId" and stored in the "ActivityFile" database table. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> fileLocator </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">EntityFileLocator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ActivityFile"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> recordId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Pass the created locator to the factory method. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFile</span><span class="token plain"> file </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> fileFactory</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Get</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fileLocator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Implement the business logic that works with the file and its contents using instance of a class that implements the "IFile" interface. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token range operator" style=color:#393A34>..</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/* Create the "EntityFileLocator" instance identified by "recordId" and stored in the "ActivityFile" database table. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> fileLocator </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">EntityFileLocator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ActivityFile"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> recordId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Pass the created locator to the method of the "UserConnection" class. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFile</span><span class="token plain"> file </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>GetFile</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fileLocator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Implement the business logic that works with the file and its contents using instance of a class that implements the "IFile" interface. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token range operator" style=color:#393A34>..</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<p>To <strong>create a new file</strong>:</p>
<ol>
<li><strong>Create a</strong> <code>RecordId</code> <strong>file identifier</strong>.</li>
<li><strong>Specify the file identifier</strong> in the method that creates the file locator.</li>
</ol>
<p>View the examples that create new files below.</p>
<div class="tabs-container tabList__CuJ"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_LNqP tabs__item--active">Create a new file (option 1)<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_LNqP">Create a new file (option 2)</ul><div class=margin-top--md><div role=tabpanel class=tabItem_Ymn6><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/* Retrieve the instance of the file factory. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFileFactory</span><span class="token plain"> fileFactory </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>GetFileFactory</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create a unique ID for the new file. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Guid</span><span class="token plain"> recordId </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Guid</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>NewGuid</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create the "EntityFileLocator" instance identified by "recordId" and stored in the "ActivityFile" database table. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> fileLocator </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">EntityFileLocator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ActivityFile"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> recordId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Pass the created locator to the factory method. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFile</span><span class="token plain"> file </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> fileFactory</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Create</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fileLocator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Implement the business logic that works with the file and its contents using instance of a class that implements the "IFile" interface. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token range operator" style=color:#393A34>..</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_Ymn6 hidden><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/* Create a unique ID for the new file. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Guid</span><span class="token plain"> recordId </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Guid</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>NewGuid</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create the "EntityFileLocator" instance identified by "recordId" and stored in the "ActivityFile" database table. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> fileLocator </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">EntityFileLocator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ActivityFile"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> recordId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Pass the created locator to the method of the "UserConnection" class. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFile</span><span class="token plain"> file </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>CreateFile</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fileLocator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Implement the business logic that works with the file and its contents using instance of a class that implements the "IFile" interface. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token range operator" style=color:#393A34>..</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<p>View the examples that execute CRUD operations with the files below.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>Create a new file bound to a single activity</summary><div><div class=collapsibleContent_i85q><div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/* Create a unique ID for the new file. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Guid</span><span class="token plain"> recordId </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Guid</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>NewGuid</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create the "EntityFileLocator" instance identified by "recordId" and stored in the "ActivityFile" database table. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> fileLocator</span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">EntityFileLocator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ActivityFile"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> recordId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Pass the created locator to the method of the "UserConnection" class. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFile</span><span class="token plain"> file </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>CreateFile</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fileLocator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Specify the file name to determine the file in the file storage. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Name </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Some name of a new"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Bind the file to a single activity using "activityId." */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>SetAttribute</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ActivityId"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> activityId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Save the file metadata before saving the file content. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Save</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Specify the file content. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> content </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name keyword" style=color:#00009f>byte</span><span class="token constructor-invocation class-name punctuation" style=color:#393A34>[</span><span class="token constructor-invocation class-name punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token number" style=color:#36acaa>0x12</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0x34</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0x56</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> stream </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">MemoryStream</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">content</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* Save the file content to the database. Specify "FileWriteOptions.SinglePart" to save the content without breaking it into multiple parts. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Write</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">stream</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> FileWriteOptions</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">SinglePart</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>Retrieve the file content</summary><div><div class=collapsibleContent_i85q><div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/* The file content. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> content </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name keyword" style=color:#00009f>byte</span><span class="token constructor-invocation class-name punctuation" style=color:#393A34>[</span><span class="token constructor-invocation class-name punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create a unique ID for the new file. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Guid</span><span class="token plain"> recordId </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Guid</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>NewGuid</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create the "EntityFileLocator" instance identified by "recordId" and stored in the "ActivityFile" database table. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> fileLocator </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">EntityFileLocator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ActivityFile"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> recordId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Pass the created locator to the method of the "UserConnection" class. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFile</span><span class="token plain"> file </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>GetFile</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fileLocator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name">Stream</span><span class="token plain"> stream </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Read</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* Retrieve the file content and save it to the array. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    content </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> stream</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>ReadToEnd</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>Copy a file from the original file storage, paste the file to a new file storage, and delete the file from the original file storage</summary><div><div class=collapsibleContent_i85q><div><div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>/* The file content. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> content </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name keyword" style=color:#00009f>byte</span><span class="token constructor-invocation class-name punctuation" style=color:#393A34>[</span><span class="token constructor-invocation class-name punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create the "EntityFileLocator" instance identified by "recordId" and stored in the "ActivityFile" database table. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> fileLocator </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">EntityFileLocator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ActivityFile"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> recordId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Pass the created locator to the method of the "UserConnection" class. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFile</span><span class="token plain"> file </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>GetFile</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fileLocator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Retrieve the file content and save it to the array. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name">Stream</span><span class="token plain"> stream </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Read</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    content </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> stream</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>ReadToEnd</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create a unique ID to copy the current file. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Guid</span><span class="token plain"> copyFileId </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Guid</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>NewGuid</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create the "EntityFileLocator" instance identified by "copyFileId" and stored in the "ActivityFile" database table. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> copyFileLocator </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">EntityFileLocator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ActivityFile"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> copyFileId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Pass the created locator to the method of the "UserConnection" class. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFile</span><span class="token plain"> copyFile </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>CreateFile</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">copyFileLocator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Specify the file name to determine the file in a new file storage. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">copyFile</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Name </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Name </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>" - Copy"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Save the file metadata before saving the file content. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">copyFile</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Save</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Copy the file content from the original file using one of the options.</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>Option 1. Specify "FileWriteOptions.SinglePart" to save the content without breaking it into multiple parts. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">copyFile</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Write</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">MemoryStream</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">content</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> FileWriteOptions</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">SinglePart</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Option 2. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Copy</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">copyFile</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token operator" style=color:#393A34>/</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> </span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create a unique ID to paste the copied file. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">Guid</span><span class="token plain"> moveFileId </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Guid</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>NewGuid</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Create the "EntityFileLocator" instance identified by "moveFileId" and stored in the "ContactFile" database table. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> moveFileLocator </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">EntityFileLocator</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"ContactFile"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> moveFileId</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Pass the created locator to the method of the "UserConnection" class. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token class-name">IFile</span><span class="token plain"> moveFile </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> UserConnection</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>CreateFile</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">moveFileLocator</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Save the file metadata before saving the file content. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">moveFile</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Save</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> </span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Paste the copied file to a new file storage. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Move</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">moveFile</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"> </span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Delete the file from original file storage. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">file</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Delete</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=title-1982-3>Implement a custom file storage<a href=#title-1982-3 class=hash-link aria-label="Direct link to Implement a custom file storage" title="Direct link to Implement a custom file storage">​</a></h3>
<p>Implement custom file storage if the current file metadata storage is insufficient for your business goals. To do this:</p>
<ol>
<li><strong>Implement the</strong> <code>Terrasoft.File.Abstractions.Content.IFileContentStorage</code> <strong>interface</strong> that describes the API required for working with the file storage.</li>
<li><strong>Implement a custom metadata storage</strong> that implements the <code>Terrasoft.File.Abstractions.Metadata.IFileMetadataStorage</code> interface.</li>
<li><strong>Inherit the metadata class</strong> from the <code>Terrasoft.File.Abstractions.Metadata.FileMetadata</code> class.</li>
<li><strong>Implement a custom file locator</strong> that implements the <code>Terrasoft.File.Abstractions.IFileLocator</code> interface.</li>
<li><strong>Register a custom metadata storage</strong> in the <strong>SysFileMetadataStorage</strong> lookup.</li>
<li><strong>Register a custom content storage</strong> in the <strong>SysFileContentStorage</strong> lookup.</li>
</ol>
<p>View the example that creates file content storage in the file system below.</p>
<div class="language-cs codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_P25_>FsFileBlobStorage</div><div class=codeBlockContent_m3Ux><pre tabindex=0 class="prism-code language-cs codeBlock_qGQc thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_p187><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>namespace</span><span class="token plain"> </span><span class="token namespace" style=opacity:0.7>Terrasoft</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>Configuration</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token namespace" style=opacity:0.7>System</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>IO</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token namespace" style=opacity:0.7>System</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>Threading</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>Tasks</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token namespace" style=opacity:0.7>Terrasoft</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>File</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>Abstractions</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token namespace" style=opacity:0.7>Terrasoft</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>File</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>Abstractions</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>Content</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token namespace" style=opacity:0.7>Terrasoft</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>File</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>Abstractions</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>Metadata</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token namespace" style=opacity:0.7>Terrasoft</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>File</span><span class="token namespace punctuation" style=opacity:0.7;color:#393A34>.</span><span class="token namespace" style=opacity:0.7>Metadata</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* Class that implements the "IFileContentStorage" interface. */</span><span class="token plain"> </span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>class</span><span class="token plain"> </span><span class="token class-name">FsFileBlobStorage</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token type-list class-name">IFileContentStorage</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>/* A root path to the storage. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>private</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> BaseFsPath </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"C:\\FsStore\\"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>private</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>static</span><span class="token plain"> </span><span class="token return-type class-name keyword" style=color:#00009f>string</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>GetPath</span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name">FileMetadata</span><span class="token plain"> fileMetadata</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> md </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">EntityFileMetadata</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain">fileMetadata</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> key </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token interpolation-string string" style=color:#e3116c>$"</span><span class="token interpolation-string interpolation punctuation" style=color:#393A34>{</span><span class="token interpolation-string interpolation expression language-csharp">md</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style=color:#393A34>.</span><span class="token interpolation-string interpolation expression language-csharp">EntitySchemaName</span><span class="token interpolation-string interpolation punctuation" style=color:#393A34>}</span><span class="token interpolation-string string" style=color:#e3116c>\\</span><span class="token interpolation-string interpolation punctuation" style=color:#393A34>{</span><span class="token interpolation-string interpolation expression language-csharp">md</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style=color:#393A34>.</span><span class="token interpolation-string interpolation expression language-csharp">RecordId</span><span class="token interpolation-string interpolation punctuation" style=color:#393A34>}</span><span class="token interpolation-string string" style=color:#e3116c>_</span><span class="token interpolation-string interpolation punctuation" style=color:#393A34>{</span><span class="token interpolation-string interpolation expression language-csharp">fileMetadata</span><span class="token interpolation-string interpolation expression language-csharp punctuation" style=color:#393A34>.</span><span class="token interpolation-string interpolation expression language-csharp">Name</span><span class="token interpolation-string interpolation punctuation" style=color:#393A34>}</span><span class="token interpolation-string string" style=color:#e3116c>"</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> Path</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Combine</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">BaseFsPath</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> key</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token return-type class-name punctuation" style=color:#393A34>&lt;</span><span class="token return-type class-name">Stream</span><span class="token return-type class-name punctuation" style=color:#393A34>></span><span class="token plain"> </span><span class="token function" style=color:#d73a49>ReadAsync</span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name">IFileContentReadContext</span><span class="token plain"> context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> filePath </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>GetPath</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">FileMetadata</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name">Stream</span><span class="token plain"> stream </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> System</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">IO</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">File</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>OpenRead</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">filePath</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> Task</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>FromResult</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">stream</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>async</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>WriteAsync</span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name">IFileContentWriteContext</span><span class="token plain"> context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> filePath </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>GetPath</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">FileMetadata</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name">FileMode</span><span class="token plain"> flags </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">WriteOptions </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> FileWriteOptions</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">SinglePart</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                </span><span class="token punctuation" style=color:#393A34>?</span><span class="token plain"> FileMode</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Append</span><br></span><span class=token-line style=color:#393A34><span class="token plain">                </span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> FileMode</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">OpenOrCreate</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> dirPath </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Path</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>GetDirectoryName</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">filePath</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token plain">Directory</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Exists</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">dirPath</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">                Directory</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>CreateDirectory</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">dirPath</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword" style=color:#00009f>using</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name keyword" style=color:#00009f>var</span><span class="token plain"> fileStream </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> System</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">IO</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">File</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Open</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">filePath</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> flags</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">                context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Stream</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>CopyToAsync</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">fileStream</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>DeleteAsync</span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name">IFileContentDeleteContext</span><span class="token plain"> context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> filePath </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>GetPath</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">FileMetadata</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            System</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">IO</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">File</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Delete</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">filePath</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> Task</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">CompletedTask</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>CopyAsync</span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name">IFileContentCopyMoveContext</span><span class="token plain"> context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> sourceFilePath </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>GetPath</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">SourceMetadata</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> targetFilePath </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>GetPath</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">TargetMetadata</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            System</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">IO</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">File</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Copy</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sourceFilePath</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> targetFilePath</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> Task</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">CompletedTask</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>public</span><span class="token plain"> </span><span class="token return-type class-name">Task</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>MoveAsync</span><span class="token punctuation" style=color:#393A34>(</span><span class="token class-name">IFileContentCopyMoveContext</span><span class="token plain"> context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> sourceFilePath </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>GetPath</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">SourceMetadata</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token class-name keyword" style=color:#00009f>string</span><span class="token plain"> targetFilePath </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>GetPath</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">TargetMetadata</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            System</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">IO</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">File</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Move</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sourceFilePath</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> targetFilePath</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> Task</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">CompletedTask</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre><div class=buttonGroup_6DOT><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_eSgA aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_y97N><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_LjdS><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id=title-1982-8>File management exceptions<a href=#title-1982-8 class=hash-link aria-label="Direct link to File management exceptions" title="Direct link to File management exceptions">​</a></h2>
<table><tr><th><p>Exception type<th><p>Message<th><p>Exception conditions<tr><td><p>Terrasoft.File.Abstractions.FileNotFoundByLocatorException<td><p>File not found by locator <code>{locator_type}{locator.ToString}</code><td><p>When accessing any properties or methods of the <code>IFile</code> interface if file metadata is not found.<tr><td><p>System.InvalidOperationException<td><p>Can't delete new file: <code>{locator_type}{locator.ToString}</code><td><p>When deleting a newly created file. I. e., <code>FileMetadata.StoringState == FileStoringState.New</code><tr><td><p>Terrasoft.Common.NullOrEmptyException<td><p>File name cannot be null or empty<td><p>When saving a file that has the <code>Name</code> field value omitted.<tr><td><p>System.InvalidOperationException<td><p>Can't find a metadata storage for the <code>{locator_type}</code> locator type<td><p>If a file metadata storage corresponding to the locator type is not found.<tr><td rowspan=2><p>System.InvalidOperationException<td><p>Can't find a content storage for the <code>{metadata_type}</code> metadata type<td><p>If a file content storage corresponding to the file metadata storage is not found.<tr><td><p>Content storage <code>{content_storage_name}</code> with Id <code>{content_storage_is}</code> is not active<td><p>If a selected content storage is disabled.</table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/8.x/dev/development-on-creatio-platform/8.1/category/file-management-api><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>File management API</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/8.x/dev/development-on-creatio-platform/8.1/file-management-references><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>References</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#title-1982-1 class="table-of-contents__link toc-highlight">File locators</a><li><a href=#title-1982-2 class="table-of-contents__link toc-highlight">File structure</a><li><a href=#title-15282-1 class="table-of-contents__link toc-highlight">Operations with files</a><ul><li><a href=#title-1982-7 class="table-of-contents__link toc-highlight">Access an existing file and create a new file</a><li><a href=#title-1982-3 class="table-of-contents__link toc-highlight">Implement a custom file storage</a></ul><li><a href=#title-1982-8 class="table-of-contents__link toc-highlight">File management exceptions</a></ul></div></div></div></div></main></div></div></div></div><footer class=footer><div class=footer__top><div class="container container-fluid"><div class=footer__cont><div class=footer__logo><img src=/docs/8.x/dev/img/accelerate.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width=271.4 height=38><img src=/docs/8.x/dev/img/accelerate.svg alt="" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width=271.4 height=38></div><div class="row footer__links"><div class="col footer__col"><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.facebook.com/CreatioCompany target=_blank rel="noopener noreferrer" class=footer__link-item>Facebook<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.linkedin.com/company/creatioglobal target=_blank rel="noopener noreferrer" class=footer__link-item>LinkedIn<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.youtube.com/c/creatio target=_blank rel="noopener noreferrer" class=footer__link-item>YouTube<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.twitter.com/Creatio_Global target=_blank rel="noopener noreferrer" class=footer__link-item>Twitter<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://www.owler.com/company/Creatio target=_blank rel="noopener noreferrer" class=footer__link-item>Owler<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPIU><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>Connect with us</div><ul class="footer__items clean-list"><li class=footer__item><a href="tel:+1 617 765 7997" target=_blank rel="noopener noreferrer" class=footer__link-item>US: +1 617 765 7997</a><li class=footer__item><a href="tel:+44 20 3384 0040" target=_blank rel="noopener noreferrer" class=footer__link-item>UK: +44 20 3384 0040</a><li class=footer__item><a href="tel:+61 261 452 888" target=_blank rel="noopener noreferrer" class=footer__link-item>AU: +61 261 452 888</a></ul></div><div class="col footer__col"><div class=footer__title> </div><ul class="footer__items clean-list"><li class=footer__item><a href=mailto:info@creatio.com target=_blank rel="noopener noreferrer" class=footer__link-item>info@creatio.com</a><li class=footer__item><a href=mailto:info@creatio.com target=_blank rel="noopener noreferrer" class=footer__link-item>support@creatio.com</a></ul></div></div></div></div></div><div class=footer__bottom><div class="container container-fluid"><div class=footer__copyright>© 2025 Creatio. All rights reserved.  |  <a href=https://www.creatio.com/privacy-policy target=_blank>Privacy Policy</a></div></div></div></footer></div>