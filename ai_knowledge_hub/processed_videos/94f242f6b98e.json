{
  "video_id": "94f242f6b98e",
  "file_path": "ai_optimization/creatio-academy-db/developer_course/videos/Recording7.mp4",
  "title": "Recording7",
  "duration": 0.0,
  "transcript": " session number seven. And today we will continue study of our server side of creation and we will continue to do our development. And let me show you where we finished at during our last last yesterday's example. So we worked with our freedom UI package. We made business process to make some calculations and we tried to so we used a combination of no code items and code did stuff. So we used the C sharp code. We already compiled it successfully. We even started it. So today I will show you how we can debug such code. Generally, you can manage processes not only from configuration section. You can also do the same from application hub or from process library process library at settings page is at the top position. So possibly it can tell you that it's something that creation thinks is really important. Process library on the top position here. This is a special section also available in studio workplace process library. We have a lot of existing designed processes for base product and also we can create our own processes process library has some advantages in comparison with just opening diagram from configuration section. So here I can see in process library we can go to process properties. That's how we will enable additional features that will be really helpful for us to run our processes and to get additional information. So let me show you what they are. First of all, I wanted to tell you about tracing. But the full this option is off and you enable it. It shows so it collects additional data related to process execution and we will be able to look at this data for process steps after they are executed. And this tracing will help us to keep parameters values. We will be able to check how parameters are changed through process steps. And in general, this is really helpful in case if you investigate why your process is not working as expected. We will be able to see parameter values, their changes and it will explain your process behavior much, much better. Also, we have some options like display in run process button. This one is a run process button. When you start it, you see some message that great process run is not configured and we will not be able to get any arguments if we start process from here. So that's why we usually design processes to be started from sections in order to get some input parameters input data. So if you want to can run process from here. So our process is active and it's also possible to deactivate it. So if you don't like some process, for example, you have some based product functionality that you really don't like, you want to stop it. You can deactivate any process you have in your system. The process will not be able to start regardless of the way how you expect it to start with a start signal or with the start simple event or for many start and so on. The activated processes cannot work at all. And also you will see versions versions of processes can be useful in case if you develop test and run in production of your processes at the same environment. For example, you have version one, which is actual and your customers and users are working with it. Then you start to develop version two of your process, but while you are developing it, it will be not ready for end users and you still want to save some intermediate progress. So once you start to develop version two, you still keep version one as actual version two, for example, will be under construction. And once you realize that version two is okay, it's ready. Then when you save a process, you can make you can run an action set here. It will save an action set as actual and it means that any other process version could be manually set as actual version. That's how you will switch your users from working with previous versions to new versions and older started processes will still keep going with previous diagram and to new started processes will go within new diagram. But what I wanted to tell you about this so managing of processes version is good if you develop directly on production. But if you have a separate developer environment, if you have separate test environment and so on, it probably will add additional difficulties for you. And that's why I prefer not to enable this versioning or processes and each time when system asks me to save a new version for process, I usually reject and overwrite existing version. Because when you have many versions of your processes, you also will have many items in your configuration, you have more items like this for your business processes and eventually old items will be expired. So they will be not necessary, but they will present in your package. And if you attempt to delete them manually, you will finally delete the whole process, including all of its versions or it's risky. You should take care and save some items as exported metadata here, then recover it. So it's something that looks like a necessary difficulty and it's better to avoid if you have a standard transition of your solution from developer to test and to production. So I recommend you to keep your version only one single version. It will be easier for you to have to control all your situations with your business processes. But it's up to you. So at least the platform offers you possibility to handle process versions. Okay, so what I want. Oh, sorry, this is setting which I went to say. Also, as you can see, there is a red warning message that tells us about the process. It tells us about performance impact. So if we enable trace process will work a bit slower, but it's not so critical. Probably 5% slower. This is not a big deal. And compared to what functions and what features it shows us. So usually we sacrifice a bit of performance here and enable this trace in case. So it really happens helps in case if we need to debug our process and to see how each step was executed and to see process parameter values at each step. So this is significant in an important information, especially when you would develop and debug your process. Okay, so how we start our process, we went to reality section, we can select some data or we can use its page, but now let's say house for rental, calculate average price, calculation was successful. But we did not see anything. We only can see some history of execution and now we will be able to see trace data trace data became available because we turned on this option trace data can be extremely helpful because it helps us to see our input parameter data, which we had at the beginning of the process. Then we have parameter values of selected item and finally when we will move on. Unfortunately not all of the items keep such trace and allow us to see a bit later. I will show you how to see final trace data, you will understand how we can display it so we can use some items later in our process then select on it and it will show us trace data with process parameters. And I want to show you one more additional feature which is important for processes, it's performance counter. So let me show you. So we can try to make a columns setup, shrink a bit. And we can display execution time. Execution time is duration. So let's display duration in milliseconds. This works good for system actions and milliseconds are perfect for this. And also we can display this same duration but in minutes. It will be useful in case of debugging, in case of some user actions used and some display messages shown. So users are usually not so fast as systems. So we will see these performance. Now you see our process element performance for last recent start and you see that reading data took 21 milliseconds. And then we have some more calculations also it takes some time and in general, you see that in total not so much but we can also enable duration display in process log. Select fields to display and close unnecessary columns. In order to display duration in milliseconds for process in general. And also we can set duration in minutes just to see some processes which were executed quite slow. So now you can see that we have total 130 and we have some items and you should be ready that it will never match. So total duration of items will not be matching the total duration of the process because it looks like business process engine has additional spending of resources for process start. So maintain maintain in it and then collect finish and such process elements duration is only part of overall resource spending and time spending of process engine but process elements duration will show you relative speed. So it will make it clear that read reality takes longer than calculations is in our C sharp code. And also you can see that form of us are almost lightning fasting comparison with any database related preparation. We can see what items are fast and what items are slow in this list. Even in case of such numbers will be not really representative and our total process executions a bit more than 130 milliseconds. So it looks like 100 milliseconds were spent on process start and finish but this is in general which will give you general understanding if the process is fast or not. For example, you see some other processes they take sometimes they take much more time for calculate and we have a lot of system processes here everything is shown in this log and you can try to improve your processes. You can try to implement some changes and then check its overall duration and duration of items. Let me show you one more example let's go to houses for sale and to run calculation and go to process logs. Now you see second execution even though it process more records but it was faster because of so called warm up effect. First time when you start process system takes a lot of resources to deploy process engine service in memory to organize and allocate all necessary class instances so prepare everything to work with processes. Next time when you start the process system uses a lot of allocated classes and a lot of allocated objects in memory so it takes much less time and obviously your next start of the same process the same data may work much faster. Next consequence starts will also be quite fast and it will be I think not longer than the first one and you can see items inside you can see that still read data is lower than calculation and you still see that formulas are quite fast and it takes almost no time. So that's how you can analyze performance of your processes and you may think that it looks like everything is very good so like 10 milliseconds 15 milliseconds even overall 100 milliseconds is very good time yes I agree for this but in real life processes and real life environments working in high load conditions your situation will be different. You will work with much more loaded entities and currently I'm running on my single PC as a single user so I have almost no simultaneous access now any current activities and that's why my website is working fast and in real life conditions it may be different so analyzing such performance analyzing duration of items will help you to find bottlenecks in your process of formation. You will exactly and easily clearly see what items take the most of system resources and you may think of how to improve it. So that's how you can in general check your process execution and analyze its speed but now we will come back to our code so we are interested in real debugging of this code so we need to see how they see sharp code is executed line by line and happily so we will be able to do this. And fortunately system offers us possibilities to do this and first of all I need to show you that this code finally turns into automatically generated code that we discussed recently in our to resolve to a map to resolve configuration pkg then we go to our package folder and then we go to auto generated sources. Here you see automatically generated class it is generated by creation and then used by compilation so this class is saved on disk you probably think of whoa we have C sharp file possibly we can edit it unfortunately not here and if this class is in so if you have a file in auto generated folder. You will not be able to modify this because each time you compile again it will be overwritten by creation but you can use this file for debugging I will show you how we can do this for debugging we need some powerful tool I will use visual studio. I'm using community edition I will have to do some trick with administrator privilege. Just a second. Remember my administrator credentials I have to use a separate environment separate windows credentials for this. Okay so I'm starting my Microsoft visual studio. Sorry here this is Microsoft visual studio I installed it recently it's a community edition and 2022 so this is community 2020 version you can store it almost for free from Microsoft website and download so currently I use it for my personal developer needs and it works well. I want to use the community edition I want to install C sharp tools here not so much and it works for simple development and for debugging. I have to run my Microsoft visual studio as administrator otherwise I will fail with debugging and debugging is important because we have code which we are not sure how it runs and we want to run it line by line and check it out so see if it works fully as it works. I will show you the easiest possible way to debug our website and just please be very attentive here after you install Microsoft visual studio community edition you need to perform some settings into it. If you do not perform such settings if you skip this step you will not be able to debug your break points will not work but let me show you tools options. Here visual studio usually hangs for some time I have to click now it works more or less okay so let's go to debugging general you see it's handling. Okay click back and forth now you see it shows my way correct settings and we need to go to tools options debugging general and then we need to find the most important setting here which is called suppress GIT optimization on module board. This setting was off by default and we must turn it on otherwise our break points will not work so this is critically important setting don't forget about this is important just my code was originally on it's recommended to keep it on but unfortunately edit and continue is not supported so we can shut it off and so we can turn it off it's not supported because compilation will be not done by visual studio will use the libraries created by creation and it's not good idea as visual studio tried to recompile them. So edit and continue is not supported edit and continue the feature which helps us to modify code recompile on the fly and to see how it works after recombination but in case of creation or compilation is done by creation system not visual studio so this feature is not supported so far. Other items could be just out of the box it's hard to remember all such settings so I will show you where you can find the technical details this is about development tools external ID basics scroll down till we find visual studio screenshots here and corpilinks so now you see suppress GIT optimization module what must be on. The most critical setting that you must do if you want to debug with visual studio okay the corresponding link is in your chat. Okay looks like we did everything that we need we have to save our changes and then we have to perform our debugging steps file open and here you will see some surprise file open. File so it's possible and it's enough for debugging to open just file that we plan to debug let me show you no solution no project which is go to the integration tkg and we go to our package folder then we go to auto generated and find corresponding C sharp source of course we will not modify it we only open it Visual studio will create automatically generated solution but it's okay we can go to its inner code and put break point in order to stop execution of our code at this point at this part when we will finally run to this line. But now it's very tricky because as you can see we only made it break point but we need to attach to our worker process let me show you how we can do this debug. So we need to find the worker process it's named w3wp and you can see it's title and you can see user name in case if you have many creation instances you will see the proper one. This is the way how you can select the proper worker process w3wp this is your worker process from i is and of course we have to select it and if you don't see it you may try to show processes from all users. Here you will see much more processes w3wp attach mode is automatic and then we'll click just attach. This then tells us that we are probably doing something suspicious but we will agree attach anyway. Now you're seeing that our break point is not fully ready studio says says as that it will be not currently hit some problem with symbols so how to fix this and I think that the easiest possible way to get started normally is to restart our app. You already know that restarting of the app is possible with the help of maintenance tools made by new technologies from Switzerland so let's go to restart application button this button appears as a result of installation of maintenance tools from marketplace okay we'll be restarted great let's continue and it takes just 10 seconds to restart but now you will see what happens inside of visual studio. Visual studio starts to show us these big red debugging line and also we will see some blinking messages and finally our break point became fully available so this means that our start made studio able to correctly vote symbol files necessary for the next day. So now we are fully ready we can do the bug and now studio just wait for this line of code to be executed so let's go let's try to you see restart to the app is finishing go to real T section so now our studio is attached to our process and it will stop its execution if we will run. Now corresponding business process okay let's calculate average for apartments for sale we have two different departments here calculate price. And what let me check process log it looks like something is going not is expected but it just took a bit longer time and yes we got our debugging no exceptions everything looks good we have just break point and execution stopped at the moment where we have script task in our business process. So you remember the process structure now we are somewhere here and we can run this code line by line. I understand that this part is probably boring but those who do not want to do a lot of development in creation but this is something that will let you understand how your code is actually started and this is only possible if you run your creation locally. Because you need access to file system you need visual studio to attach to your work process so this type of debugging can only be performed in local environment conditions unfortunately when you work in cloud conditions you will not be able to do this kind of debugging. Okay so let's start we can run lines one after another with the command f10 step over you probably remember some debugging sessions in Google Chrome development console so here we have something similar and even hotkeys are very similar so f10 is where popular will use it and present f10 several times. Now you see one two we can also handle locals or watch variables let's try to look locals type you see it was changed over type was changed great filter was created and collection changed another filter another adding then ask your text now you see ask your text changed we can view it. Here is our actual ask your text which will be running in the data so this is important possibility for you if you make some more complicated scripts more complex filters maybe some parameters that you don't know how to work with so this is something that will let you understand much better data selection is working in creation. So basically we got this ask your script out from entity schema query instance we used get select query method then we used get ask your text method in certification questions one of the question will ask you about entity schema query available methods so this will be one of the answers how to get ask your text out from ESQ. Here is get select query and then get ask your text OK we can save obtained result into parameter. Then we run the most important line in this code this is for getting collection data. We have collection number collection records number two we have two records there so let's go to start our counters run cycle for our data records so we have only two apartments for sale you see Austin and Florida apartments for sale so we process such data but we only can get their prices. Here you see price area and then we update our total counters price and area and then go to the next line another price. Another area update counters and finish the cycle finally total area total result here you will see result was calculated. Like this and we can save this result into decimal parameter and then return true I did not tell you importance of this return true or return false so let me spend a minute on this. This is a sharp script task has options to inform process engine about is it successful execution or not in case if your script task finishes with return true it means that process engine is ready to execute next step immediately and no errors detected. Return false it means you tell to the process engine that your execution experience serious errors so you have to stop process execution fully and process will be stopped with the error state so if you return false it means you perform unexpected let's say like emergency stop of your process. That's how you can manage this also you may create one more action for this you can handle no you can raise exceptions inside of your C sharp code this will be also treated as a emergency stop but also it will tell to the client said some exception text and that's how you can provide some reason for stopping of your process so you can. Throw exceptions with some error message text and user who started to process type will see this error message now case everything is okay process executed normally we have to continue our execution by pressing F5. F5 means normal continue in this case our process finishes its execution and now we can see so we have no data changes here we can only see that calculations was done if you go to process log the recent execution you see milliseconds have a huge value and we have more than six minutes of total execution time of our process this is important. For us to check how fast all execution was done and as you can see our read data executed more or less according to expectations but our coded part took enormous time of six minutes because of our debugging session so you can check what steps take too much and you can think of how to improve it in my case you see the bug in the back. I definitely made it longer but it's just our design and development attempts in real life it will be not so slow. Okay I think that currently understand how it works so let's try to run it once again in a bit different conditions so it's open house for sale as an argument will only have this ID. When we start the process this ID is transferred as argument we will get corresponding values and parameters now we already debug only our program code so you may ask about is it possible to debug no code items unfortunately no and they will just execute it without any stops but if you want to intentionally stop your process. Stop your process at some step in order to investigate status parameters variables and so on you can add additional temporary items into your process that will display some data using any kind of first show message any kind of messaging like pre configured page or automatic auto generated page so you can use it for like artificial process stop and that's how you can get. You can get additional information about the process execution if you go to process log and see trace data. So in my case I plan just to run this process once again now I expect the bugger to be activated again as you can see it takes significant longer than expect time. Oh yeah it's already finished here so just my fault. Okay running in running it again now you see all the execution all execution goes we can see this SQL text conditions parameters are saved separately selecting data again we have two records but. Different records working with price and area updating totals. Another price and area updating totals again and calculating final result and we can just press F5 or normal execution. Oh it works like I accidentally started one more time okay let's try the five again okay so it was just my fault I started this process twice let's go to process log. Now you see this was my debugging stuff this was just maybe three or four seconds to debug and then next time so you can see that all of your execution all your processes is tracked and also you can handle and check. Process parameters unfortunately this trace data is not shown for any item. Personally I have a question why but possibly somehow connected with the type of executed item and we still have good enough options to to look at parameter data and to check it out during debugging and then during investigating how process executed in process log. But of course we cannot propose our customers to go here in order to check some result data we need to have a fancy good looking way to do some kind of output. When we start the process like this we want to provide some kind of good looking output for a user and of course obviously we will do this. So now we have process which only co-coates data and saves its results into a page into process parameters we can use some items to make a good looking display of such data and I plan to use user actions for this meanwhile we already do not need to debug so it's better to avoid a necessary system. So we will use source as a source as you can see 1.3 gigabyte of memory was allocated for my app and Visual Studio they can track it. So let's detach our Visual Studio, detach all. It will save a bit of our RAM for our creation and let's check. One gigabyte of RAM was still already eaten by creation process, a creation in general, creation of web of what a process. So my plan is now to show user some output. I plan to use, looks like I lost my title here. The most important is not to change the code in C-sharp part in this case system will allow us to save our process without any questions and without asking to recompile. Only if you change code here system will detect this and ask you to perform compilation again. So my plan is to use some kind of output window. I will use user actions and the most recommended option I think the most popular, the most useful is now pre-configured page item. Pre-configured page offers you the possibility of fully to show fully customized page for a user. It means you have no connection with existing data as you may find in open edit page item. So open edit page can only show you pages connected with existing objects. And pre-configured page can show you any random page designed in your system. So let's use this option pre-configured page and carefully put it on the diagram. Pre-configured page is designed to show some pages for user according to process execution. Obviously this page will appear at user side, but you need to remember that in general business process is a server side functionality. So when we have a process when we start it server side process engine service starts to collect metadata and process it step by step. It performs almost silently without showing any messages without showing any UI changes in general. And only if you want to show some pages for user we can use some special items for this pre-configured page is one of such items. I think one of the most recommended features for this task pre-configured page will show some page for user at user browser. Which page to open? We don't have any suitable we have a lot of out of the box pages, but they are not suitable for our task. And we want to display average price, decimal value and also we want to display SQL text only for debugging purpose. So we can simply create new page and then we can decide which type of this page is a freedom UI or classic UI. Of course it makes sense to work with freedom UI right now. So let's do this. System will open new page editor dialog. We can use different types of pages and let's use this on tab to page this area on top. Of course this is too big page for our purpose, but this is a simple example in real life. You may need a process which will ask user about some parameters, about some arguments and in general business scenario. It may happen that you will have quite a big list of some data for input. So in general you can create pages with unlimited complexity. As many parameters you want to input, you can implement. So no limitations here. And we can use different page parameters. They are not connected to any existing entities. So you see just set of controls. And in my case I need to display number. So use number control. Of course I will rename it into average price. The inner code will be maybe usravg. And format will be decimal to digits. And as this is an output value, I do not want user to modify this. So I'll make it redone. It's quite obvious. You see it's no code setting. So very easy to do. Next parameter that I want to use will be a text or maybe I can try rich text. But first let's try text and make it a bit of multi line like this. And skill text. It's just for demo purpose and for debugging reasons only. Skill text parameters 500 probably multi line text will be a good option here. Okay, as you can see I don't even care about element code. Because I do not plan to modify code of the page, but physically it's possible. This will be a freedom UI page where you can also make your own handlers. You can add your own buttons or other types of controls. So you see very rich possibilities to build your page. In my case, skill text will be also redundant because this is only for data output. So my skill text is for data output. That's it. Only two parameters here in real life. Of course you may use much, much more components and widgets and parameters. So this is just to make it simple and easy. You'll be able to reproduce it easily. My page will finish its work by clicking save or close. Maybe we can hide cancel button. Is it possible to hide now? Okay, we can save our page now. And also I need to check where is the package. Let me check page settings. Okay, they are real to the same package as my main process is saved to the only disappointing feature is a code automatically set for this page. So I will use something like average rise output page. And we can also use the same title just to make it good looking at our configuration section. So it will be named and coded properly save it again. So now you see our page is ready. Well named you can save it again saved correctly. Close it. And then we can use this page. As you can see it still shows us the old code. But so we can probably select this one. Yes, now it's correct. So our editor, remember it created page. So it shows us its title and its code. So whatever you prefer the most, I know so we can name it something like show results. I will see this page user who performs the task. It means I will see the page user. There are other options like someone manager or a role, some member from a role. In my case, user is like simple and easily because server side will detect exact user session based on the contact value that we provide here. So here we have to provide a contact of a user who we plan to show this page for and current user contact is very frequent typical value here. So we simply will show the page for current user, but it's possible to include several different persons into your business process logic. So it's possible to calculate another person or someone's manager or just read some specific ways where you can handle. And other persons involved into some business activity and you can provide here not only current user contact, but you can simply provide any contact of existing user that you need for your business project. Okay, show page automatically means that once this item will be executed page appears immediately. We can hide it. So do not show page automatically. In this case, this item will be still pending. So it will still wait for user to start to show to show it and user will see this item in this notification panel in business tasks list. So user will be able to find the pending item and that's how it's possible to see such item in case if we do not show page automatically recommendations and hints were used for classic UI examples of pre configured pages. Unfortunately, it's not supported for freedom UI, probably developers decided not to keep it in freedom UI. So it's up to you. We can skip this part and what buttons complete the page. It's important to understand that when some page is shown for user as a business process item. Then this page will wait for its time user decision. So page will decide when its work is done and in our case, we can do it by buttons. If we do not press any button and we just switch focus to another section and go on to work with another data. In this case, process will still wait for our decision and will not move on. So simply speaking, we can even stop our process. We can like block it at some stage without moving forward until we will specify some condition and make some condition in order to proceed with our process. So in this case, let's make same and close buttons are enough to finish work with our page and move on. And such options are important to specify how we plan to continue our execution. Okay, at the end, this item has parameters page parameters. We need to load here data from our process will use process will use parameters mapping here. And it's very easy. We'll just click on this lightning button select process parameter. Select corresponding parameter and click select. That's how we matched process parameter with page parameter. Let me explain how it goes. So here somewhere we have a process process parameters somewhere like a memory of business process engine and we use it here here here. We finally transmitted such parameters to our C sharp code later on we expected to get such data back to process parameters and then such process parameters are held at process level. We can move our parameters back to page. So this is important for you to understand that data will go from process parameters to our page parameters. Now we set scale text parameter and then average price for the page will take its value from corresponding average price of a process. So in process parameters we have this select and this is called parameters mapping and when this process items start according to the mapping as scale text will load data from as scale text parameter and average price usd will load data from corresponding average price process parameter. No need to run items next items in the background. No need to create a technical additional record in activities section for this. So we will not use this. We just set parameters and save each time we save our process diagram saved in our package will be changed. So if you do not save your progress is only in your browser and will not work until you save it. So it's up to something. So now we made this item to display some results. If you work in classic UI usually it's mandatory to reload the page in freedom UI sometimes it's not mandatory but I just want to make sure that everything works well. That's why I just reload the page for sure. Okay let's open some house in Seattle and start our calculation. Now you see that our calculation was quick. We got average price calculated. We also have debugging as scale text just for developer need for debugging purpose and our process seems to stop here. But if you go to so let's imagine you went to another section so you didn't finish the page. You went to another section you started to work with different data you almost forgot about your process but if you go here into notification panel and find business process tasks list here. You see pending items you will see items that are waiting for your response and they will be hanging here until you finally finish them. So that's how system reminds you about items that current user should do and this list will include all pending items from all different processes started from our started for our user. So show results we click here we see again this page we remember say we're close button will finish work of this page. I can click save and process finishes. You can go to process one to see its execution it took 1.4 minutes and now you see that most of the time system spent on show in page and waiting for user response. Such an rising of duration may help you to understand how actually your process is used where there are some tricky steps which make users to work longer to spend more time. So it will be helpful for you to understand your business and your level of automation and you will finally see what can be improved here. So this show and page also as you can see it enables trace data for this step if we enable show trace data you will see final values of our process parameters. This is our input value here we have calculated over type and so we have type and over type input data is here and as a result we have average price and we have a skill text for the bargain purpose. In case if you have any questions feel free to ask because we almost finished this step and now you see we made a process which is able to show us some data. No, so I need to explain you some side effects and the side side questions. So for example user started our process but then okay process can be quite long and the user had very pretty steps there so it may happen that user just did not see this page something happens like something is broken and user was too quick to switch to other parts user thought that something was hanging then switched to another section and so on. User can easily go back to the process by looking at notification panel business process tasks show corresponding page save it and that's how the page will be fixed. I mean the process will be correctly finished and you see now user has no items to execute it's possible to include many different users into one business process and also you need to understand that process is still executed at server side so when we have some page display for client user. This is a mechanism which sends special messages from server side to the client side. I think it was done with the help of web socket then client side page listens to such web socket and it gets it then it shows you the page and also displays. Business process tasks data here so user can look at any time even if user accidentally closed the page at all user can go anytime here and see what processes are waiting for the feedback. This is quite efficient way of making your process interactive making your process able to input some complex data to display some intermediate or finishing results of calculation and all of this is possible thanks to user actions we only used pre configurate page we have a lot of other options here like dialogues open any page of existence section. Auto generated page is a very very old item probably 10 years old item and it is designed to just display different columns different fields in one column and it's also can be used for input and output. We have send email item which will show you some email text before sending it and approval tool which can be helpful in case if you need to automate some kind of approval logic when one user creates something and needs confirmation from another user or even set of users that everything is okay. And usually it's used for something which makes commercial importance like contracts invoices or some other types of documents where some other people must confirm that everything is okay. Some documents or data so approval is a based product mechanism which helps to organize such kind of confirmation by different people and make it well automated inside of creation. If you want to know more about different process items I recommend you to attend our customization course. There are more examples there and they are fully no code but our sessions are intended for developers that's why we focus on coding that's why we see how we can get parameter values how we can save them and how finally we can merge this coded development approach with no code stuff which can be designed with no programming. In case if you have any questions feel free to ask this example is over and probably it's time for us to have a 10 minutes break. So if you have any questions feel free or type your question during the break. So next topic for our session will be about processing events so processing object events and I need to explain why you need to know about it. So this is a server side functionality and it's possibility to handle some operations with possibility to react for system at some changes that we perform in our data let me show you three ways to handle object events but before. It makes sense to download everything to file system to commit to version control because it's our next step that we successfully did. We will save everything on disk in case if you have any questions feel free to ask. So we save all the changes we recently did at file system you see takes a bit time more than expected. Okay we have real changes we have migration settings okay now we can commit our changes to version control. You see I have two big topics here okay we can commit great sync pull and push yes okay so now we finished to finalize our steps that we did in previous example and I plan to show you and explain what is event handling and how we can handle it. We have three different ways to handle events at creation objects let me show you three and. And then object events first one is very easy this is no code solution and using business process start signals I will quickly made an example I will make an example for you you understand how it works to be very easy and very quick but it has also this advantage is it has only three supported events and relatively low speed but it's really fast today. So I will show it for you and let me show you this easy way of handling data changes so let me explain some business sense let's imagine we create new real to like we press new we fill in some data. So this is an apartment for sale. So let's imagine when we save data so physically we do insert into new real to so insert of new real to record into our data model and if we do the such insert we want to create several real to visits automatically let's imagine we want to do this task. So once insert happens we want system to automatically create some visits for us this is possible to do and even with the easiest way of doing this with the help of start signal we can do this easily and make it using business process let me show you let's go to process library and you should be very careful when you create processes from process library. Because when you click new here system will take into consideration current package system setting so this is a classic UI stuff but you should be careful because you can create processes even for any kind of solution so go to settings and you see target package is that classic so you should change it or you are a reality yes modify also. There is some side effect which I can't easily understand and explain here now you see some strange packages you as are calm something and calm in other something so it looks like system dreams about some packages but we cannot find them in our packages structure. So we will not see it here in our packages. Also even if you go directly to look at the database and they will assert for packages information or maybe like this. Not so good okay we can just select everything from this package. So when you want first and you see that we don't have any any usr special packages here so it looks like here we have something artificial created possibly used for future customization so some apps but we don't have it now okay so we will select only one package here. And our code will be usr to add realty visits process. So now you see auto add realty visits process and you see we have code and title great so the main idea of handling object events the help of start signal of course it's simply to turn our start simple event. Clicking on this button change type button inter start signal event why I say start signal because technically we have another types of signals so we have wait for signal or now we have throw signal so we also have intermediate signals they have a bit different functionality so start signals are designed to start your processes and by default it's an object signal. Technically you can use cacastum program the signal but object signal is the most commonly used and we have to specify object which will then to listen for our event handling of course this is our realty within your object this one. And we have only three supported events so far developers have to end to improve this functionality to have for three before events and three after events now we have only after events and we have after record added after record modified and after record deleted was delete we have some additional. Functionality which looks like this is actually before event because when we will handle record deleted and try to select record that is about to delete it still present in database so. For delete we use before delete event but for added and modified it's definitely after delete after add and after modification because when we do selection from the database it shows that date was already added or modified so in my case I plan to handle insert event so record added and in. So in general you can use additional conditions here and such conditions could be helpful if you want to run your process not for any realty insert but for some certain data for example only for houses or only for apartments or some complex condition so. Now I will just skip this part but run following elements in the background is really useful feature if you run your process with no background option it means that from user point of view insert update will take some time plus time for running of your process because it will be started at the same. At the same scope at the same thread so without background perceived speed of your solution will be not so perfect if you set run following elements in the background physically system performs scheduling of your process according to insert event into one time execution with the house. So we will start off background process scheduler and it will finally start in a separate thread and from user point of view insert will be processed faster and corresponding event handling will be done in a separate thread without any visible delays for end user. So in general running in the background is recommended to guarantee better user experience better perceived speed we can name this signal realty added which means that once the signal is triggered it means that some new record was added. Okay so we can start the process with the help of signal but what we have at the moment of start unfortunately we don't have so much we can switch to advanced module advanced settings and we only have one single parameter unique identifier of record which triggered our signal. So this record trigger this signal and the only value we have is ID of the record so no price no name no anything and if you really need so you have to select this data from the database in our case I should explain the business sense of it my plan is to automatically add realty visits after we add the new realty record. To insert a visit we need parent realty and some additional column so let me use add the data item which object to add data of course to the visit. We'll visit one record and we can specify columns of added visit of course it will be parent realty this is mandatory column we have to specify it probably can try to calculate potential date and time and possibly we can. We can specify comment or some other columns ID and historical columns will be filled in automatically. Okay parent realty we can take it from start signal so we can take it from process parameters switching to process elements realty added and then double click on unique identifier it's how we do this setting comment will be something like auto added. So add it visit physically turns into a C sharp string here with double quotes. Okay and visit date and time can be something like current date and time and then we can go to formula so for example we can add some days add days. And what it be just one day forward so one day into future from current moment. This is just a simple example we can name it add visit. This will be just one visit. You can use copy and paste approach if you need many but of course it's better to organize some cycle to make it more efficient so now let's test out works with just one visits first so we can save this process and you should remember once you save the process with start signal and if your process is active so it's not disabled now you see it's active. And this process will work each time you have new insert let me show you let's go to realty section try to copy data. Save it. Look at it now you see new visit was automatically added automatically added and visit date and time is somewhere in future. So you see that it works we can make many visits as one operation I will quickly make a cycle for you this cycle will include parameter I will use integer and parameter. Just to make kind of a cycle variable for me initial value to be for example three. So to be variable which I will decrease one by one and I will use formula. To decrease my cycle parameters I will save value to n and formula value will be n minus one especially use spaces here because so tiny formula is hard to read and having spaces will make it better and like more visual. Monica and possibly petty are you following me today should I make poses for you please confirm if everything is okay with speed of our solution. Thank you Monica. Okay, I don't okay yes Adrian sorry not really Adrian okay just a formula which makes it easy and you see we can just decrease and by one and Rahi thank you thank you great. So we have something like and equals and minus one in this formula very easy expression but then we have to organize a cycle and we can use conditional flow going back to this stage. Now this is a sequence flow but we can convert it with this change type button to conditional flow conditional flow will only work if a certain Boolean condition is true. So I have to compose this condition this condition will include double click on n parameter then comparison greater than zero. So if this Boolean expression is true then my conditional flow will work and will be used here otherwise so this is in other sequence for I will turn it into default flow default flow has a difference you see a small dash at the beginning default flow works as a else statement for an if operator. Or a great or default statement for switch operator which is better and better alternative so default for work in case of no one from conditional flows executive but we made made here a condition and also can make a title for it and I encourage you to provide enough titles to make your process self explanatory. To make it easy to understand so while and it's greater than zero we go back we do one more insert and then we go back to this formula and decrease and again here we have n equals to zero this is just a title but it will show us that it's the end here it will be like finish. And as you can see it's very easy process and also we can just make it a bit more useful for us so for date and time calculation we add some number here and we can add n days double click and now you see special macro for n parameter was added here so first time we will add three days next time we will add. Next time we will add two days then one day and then we will finish the process as you can see we can make simple cycles in business processes save it once I save it this process is already actual so I do not need to start it with a special button then I can go and check it again for example we have an apartment for it then we have no details okay and we can copy it. Some you save it when saved we can see it's the tail data and you see we have three days ahead two days ahead and tomorrow tomorrow you see all three visits were added successfully and our process executed correct it we can go to process vlog to see our recent execution and also it's interesting to look at the. This diagram shows number of items how many times this step was actually started so you see we had three cycles here cycle bodies then we finished our execution so execution diagram sometimes may hope you to understand how exactly your process started how it worked and. This can be helpful if you go to process vlog details you see we add visits add parameter and again if we enable trace then we will see all the values of the parameters at each step of our process you can also see duration in milliseconds and you can analyze and understand what is the slowest part of the process what the fastest part. Where you spend the most of resources such things as duration can be really helpful to analyze overall performance so it was very easy simple example of handling object event with the help of start signal as you can see it doesn't take too much time so easy and fast to develop but we have quite simple three events and relatively low speed when I say about low speed you see point two second it means 200 millisecond for execution it's probably not so much but if you work with multiple records if your task is to process data with as fast as possible way so having such time spent on it probably will be not the perfect not the best idea so we have two more options of handling object events what of them require coding and second is object embedded process let me explain what it is about we will focus on objects now let's open so any object we can open any object and you can see its events tab events now you see 13 supported events so it's a lot we have 13 different options to handle events and once you start to use it for example before insert you see system generated some code we can copy it then we can look at open process button so it's important to mention that any creation object has its own unique individual embedded process this embedded process is designed only for one purpose only to handle object events the way how you can handle it includes using of events sub-process using its start message item and we have to paste our code that we initially copied from this into this then you can use items like script tasks formulas or user tasks and the most commonly script tasks are used and then you can connect your start message with this script task in this script task you can also operate with embedded so with your current entity with its data row you can use entity methods for it but there is a very strong disadvantage of using this approach in general and this is a advantage is quite serious this type of event handling does not work in packages compiled as separate as somebody simply speaking for all so for any modern package where this option is turned on in order to make fast compilation your event handling with embedded process will not work and it only works in old styled packages where you have no compiling into separate as somebody for example CRT base this package as far as I remember is not compiled as separate as somebody and we can look at its objects for example we can find the contact object one of the best examples contact it's not here let me find where it is placed for probably CRTDI let's check or maybe base something CRT core base package yes CRT core base this one contact object if we open it as you remember creator has open source for base product configuration we can see events we have some events settings here for our object and before insert after insert before delete after delete and then we can go to open process to see examples of implementing it so you see some examples of event sub-process start message then script task for execution of some useful logic and in many cases it's based on script tasks also you can see examples where we have some methods running and methods can be implemented in embedded process properties here and also as well as using of some additional using where we have my using it should be somewhere here I believe the run into oh using are here sorry quite all those so methods include decoration of the class fully and including methods that you need here and using can also typed manual if you want but this stuff works only in this package because we have CRT core base package which is not compiled separately but if you want to develop such code if you want to compile it you will experience quite big delays so in general use of packages not compiled a separate assembly will make it hard for you because long compilation time and you may ask me about okay so if this powerful tool with 13 supported event does not work so how we can use it how we can handle object events efficiently and supporting all modern package features the answer is third answer is object events layer the most say the most modern and like the most recommended way to handle object event it also still needs coding so it means we will have a compiled code and it has a bit less events only eight supported events but it is the most flexible and I will explain why so now you will see this example we need some documentation for this this is about backend server site data operations and I need to find object events yes some here somewhere here great this is our article that you need to study if you want to understand better how this mechanism works we have eight supported events and they definition is before and after insert before and after update before and after delete and also we have very interesting and unusual event called saving before and after save but what is save it's interesting that save was used in order to make the same handler if you want to organize the same logic for adding data and for updating data record so saving is triggered in case of insert and in case of update and here I can see the exact order of execution saving inserting then actual add of data is performed in database then insert to do and save it so that's how order of execution events is performed. Sada tells that has to leave and will be finished to later thank you very much Sada sorry for making my sessions a bit longer than expected possibly we had to plan it to run for 2.5 hours okay Sada thank you very much for your time have a good have a good Tuesday thank you so here we have a set of events for creating record set of events for updating and obviously for delete thank you so 8 supported events and I told you that it's very flexible so why it is flexible I will try to explain in previous examples we had to create a process which starts by signals or we had to make changes in object if you want to add some event handling but in this case in this third way of event handling I call it object events layer or object events or entity events so in this in this approach we can create our own class which will not require any changes of the object that we plan to listen so we will just specify object code and that will be enough for our class to operate normally so we can listen any existence system object no matter how far it is developed inside of our package hierarchy this approach does not care about package dependencies at all the only condition for it to work is presence of corresponding object at our environment and this is a C sharp code that can be designed with the help of special item called C sharp source code so we will use this tool we will use professional integration with Visual Studio and I will show you how we can make event handling of it will not take too much time for those of you who do not really like to program in C sharp this will be a bit boring but I will try to make it fast and you will see business results right now and it's important to mention that this kind of event handling will be performed as well at server site so no matter how technical this insert will happen like we add data from user interface page or we add data with the help of business process or we add data with the help of API calls processing it at server site will trigger this event handling so this event handling is inevitable for server site and there is no way how you can suppress such event processing so it's quite reliable and that's why it is suitable tool performed server site validation let me explain some business sense of it let's imagine our task is to make some limitation on data and for example we will have a very big price for our reality and we will put some very immense number here so it's not correct too much yeah you see we have some limitation here okay what about this okay looks good so here is our commission our huge price with 9000 to 3 don't so okay very big price and system still allows us to save it so we want to limit this value we want to make some server site limitation and we don't want to save such big prices in our system because it's obviously stick so I will show you how to make server site validation with the help of entity events let's go so according to the manual but I did not share the link with you object business process oh I really share okay so according to the manual we have to make a C sharp source code and implement this kind of text there so let's do this select our package and source code this is a special type of item which is designed to provide a pure source of a C sharp which we can develop inside of creation or we can create it separately using powerful external editors but creating of C sharp source should be done from this editor Adrian is asking when do we use server site validation instead of client site oh this is a great question Adrian so server site validation is much more reliable because client site validation is only working when you operate with the page so you remember our client site validation does not allow us to put negative prices like this so it will not allow us to save it but it can be easily bypassed so for example you can make a business process which will do this or we can make a hack now trying to edit data in our list utilizing our editable list features and when you see that if we have no any event handling and we did not care about the handling by the way we don't have any no code options so far to make a custom handling of a list edit events so now you see we easily bypassed this so I just wanted to say that client site validation is good but it's not perfect you can use bypass with a list edit you can use a bit more complicated approach with business process which you can run and it will not follow client validation or even more you can use api call to insert new data and it will also do not use client site validation so client site is not reliable this is only for page and it's limited on the page so if data comes some other way not from your page so your validation will not work if you do it in client site server site is much more reliable it will work any time when entity data model is used no matter if it's used from UI from api call from a business process so it will work any time when you use data model so let's go back to our C sharp sources we have to create it I selected the package add the C sharp source code and that's how I get this tab it makes sense to provide better friendly name here let's say it will be named us are a reality events so my code for this configurable item will be real events and two ways to compose a different title so I will make the same title the same title because it's technical thing no one will be selecting it from any list so let it be my package no description because I'm lazy again and we have this this example now you see all we have here is list so just small set of properties and no localizable string and here we will have C sharp code here of course we can type it in this editor but it's not so powerful not so quick and it will not display highlight some errors syntax and other stuff so I will show you powerful integration with the show studio if you work on local on site environment of course if you work in cloud conditions you will have to type your code here and rack is asking oh I have to leave okay thank you Raki I will finish probably in 10 minutes so it's not so hard thank you for your time you will watch videos so I will show you how to integrate it with visual studio because it's much more efficient than typing your code manually here so we can save our new created source code schema source code item into our package physically it saves it on disk so we can see it on disk and of course we can also see it in our configuration in our package this is our new item this is a fully server site feature so it includes C sharp code and it's necessary to compile if you want to see how it works let's go to file system and check it out let go to our package then go to schema and then we have to find realty events that's why having a friendly name is important because it will be good to look at our disk and also at our version control so here we see some bit of metadata we do not care about it too much but a realty events CS file it's a pure C sharp code that we can develop into that we can develop with the visuals studio so let me show you how to use visual studio for this we still have to run it as a administrator if you want to debug you can close reduce open files probably we can close automatically generated solution closed solution so no solutions we throw then we'll show you how we can use visual studio for efficient development I also need to show you some file system settings that we have thanks to creation so inside of a package folder we have files and we have CS project file this project file was generated by creation it has several sections of libraries with references which makes it possible to add the custom libraries if you want to include them into this project but the most important is that this CS project file is used to get your compiled library of your package so what you need to know that all necessary for your visual studio to run and to work with your code is already created by creation by its own so I will use visual studio file open project then I have to carefully select corresponding folder as you can see my previous open projects were in D5 I wrote a D1 the map there's a configuration pkg then I will find my real team folder for my package files and then I have to open this C sharp project file CS project open it studio will think for a couple of seconds but it will be still very quick and if you want to do the same with a package which is not compiled or separate assembly you have to look at special part in the result configuration SLN solution this is a very big solution includes more than several thousands of C sharp files so it will take a couple of minutes for visual studio to digest all of its sources to understand everything all the references and it will be possible for you to use it for development of C sharp sources in case if you operate with the package that is not compiled is separate assembly but in our case luckily we use this option and that's why opening this project is quite easy and quick thing so if you can find this C sharp file C sharp code of course I already created an example to not take too much time entity event listener so my code is ready I only have to copy it for you into chat you'll be able to download chat messages I want with video files and I will use the same code into my own I need to tell you that here we have full features traditionally supported by visual studio like IntelliSense using example like this you see in Auto IntelliSense you see Auto Complete you see System Highlights text and you see that when I type something with mistakes it will immediately show error messages it will show that we have something wrong in our text it will highlight this text and tell us that we have something missing so this is quite powerful editor with IntelliSense and Auto Complete we have to perform a class with a couple of usings and inside of some namespace there is a tradition to keep your configuration code into TerraSoft configuration namespace but in general you can decide yourself and you can create and support your own namespaces if you want so here we have TerraSoft configuration just because of tradition using some system namespaces and what is the most important here is how we declare our class this class for listening of object events must be inherited from the identity event listener and also this class must be decorated with entity event listener C sharp attribute special part of C sharp code which sets additional properties to our class and this property includes schema name, the parameter that's how system will understand what exact object you plan to listen so this line number seven is very important because it shows what object we plan to listen very important we can easily make a mistake here if we do then nothing will happen and we will have no listening at all you have to specify name of existing object here okay then we have from one to eight supported methods that are virtual all the reading methods of a base class so we have to make public override void and then provide corresponding method name we have article explaining all supported methods here you can see and in my case I plan to make it a bit more interesting and useful so I plan to use on saving event which will work in case of insert and in case of update this is an in the event saving it will happen before insert and before update of record according to our documentation we have some arguments here and for before events we have reference to our data record which is an instance of an entity class and also we have some before arguments such arguments are quite interesting and important we can check out what are the values there and you will see that inside of traditional properties we have is validation enabled Boolean property key value which is ID of selected record which is currently being processed and also we have is cancelled property which helps to organize graceful reject of executing of our event and if you want to make it gracefully without any notes for end user you can just enable is cancelled true and your event will not happen but this approach has a disadvantage and this silence which user will notice probably is not self explanatory for the color side so for example if user tries to add new data and provides two big price then system says okay no error messages but when user will start to check it will turn out that corresponding record was not inserted or updated so this silence sometimes is not so desired and we can make our operation with some noise and it will be quite rude loud noise with throwing exception so we can compose message text and put some data there and then throw an exception to make our message code dependent from language we can use localizable strings so let's save our code and we need to use localizable strings here this will be also example for you and then we can go back to Cishap source code we already saved our code open it from embedded editor and we can create localizable strings and our code is values too big we use this localizable code and our localizable text message is here prices more than certain limit are not allowed this text helps us to get localizable string from properties of this schema then we use string format to replace some pattern with a certain number with a certain string and then we show this message for user as result this throwing exception will finally make an error 500 at server side so it will be internal server error that's why I say it's quite loud and rude behavior but it works so it's very practical for our case user tries to do something gets error message gets error text and everything is quite clear and user will see that operation was not done and there is a reason why it failed so we will see this error message just a second so we can save our Cishap source code we did not change any line here with embedded editor and as you can see it works well so we can use the same item with internal editor or you can use the same item with external editor to ask us to reload so we can reload it we can save it no problem as you can see it's up to you how you can how you prefer to work with it so finally we must make sure that everything was saved and then we go back to our application and start to compile our code we can compile our package the first time we have to manually do this our package and compile action the compilation takes some time and the first time probably it will take maybe 30 or 40 seconds next time for the same package it may take just 10 or 20 seconds so it's quite good performance and it will be way way faster than compile all of your system so now you can see it probably took 30 or 40 seconds to compile and it finished with no mistakes no errors and you see that this configuration finished there was no errors and we can check how it works once we created and successfully compiled such Cishap source code it automatically becomes active and will work with any kind of insert let's try to copy this big price as one more time data let's say two so we have definitely greater than one billion so our logic our comparison condition here checks I did not explain how it works actually so sender is an argument object we can run some parent implementation of the same handler if necessary if present then we can turn our sender into entity this is important to make possible running of entity methods for our data argument then we try to get price value our column is named usr price usd let me check to make sure that it's correct real t yes it's correct no problem so it's correct operation to read price then if price is greater than one billion we do throw in messages if not greater than it's okay we do nothing so it works like server side validation for us and now I expect that system will not show me so it will show me some error message now you can also enable browser developer console control shift i in order to make so and go to network tab in order to see all text or requests that will happen here so this value is definitely greater than one billion so let's try to create new network now you see that insert failed writes is more than one billion are not allowed and you see that insert query finally finished with error 500 internal server error quite rude mistake from a server side when you perform your business logic so it's like a crash but it's okay it's effective crash for us we see some response we see error message it's quite obvious and client side also was capable to handle such error and when you try to do this as you can see we see error message everything is quite obvious that something is wrong so we can fix our data let's make it not so big like this when we save it it's okay and you see that insert query now executed successfully we have no troubles we have the data at our database and everything looks quite well for us existing data will be not we'll be not so we can try to update it okay let's try to update it with an edit page so like slightly less clear say we still have troubles prices cannot be allowed okay cancel close now let's make trick make an update using list like this clear try to say as you can see still favor because it's server side server side is efficient and you see we still have error message we have error description prices are not allowed so you see we can cancel such attempt only if we will edit it in a value that is below our limit then we can save it and update or work normally data is processed normally and it works efficiently the same business logic will work in case if insert is performed from business process or if insert is performed with the help of API calls we will study API calls and integration techniques a bit later you will see the abilities for it and we will check again that this validation is quite reliable and works for any kind of insert or update attempts okay that was the third option for our event handling so we already finished with the creating examples of handling events and if you have any questions for today please ask me I will finalize my today sessions save everything to file system because we had changes at our localizable strings business processes so save everything and then committed to version control thank you very much for your time our session is over in case if you have any questions feel free to ask you will receive video recording as usual so our sessions over thank you very much see you tomorrow and goodbye you",
  "summary": "And today we will continue study of our server side of creation and we will continue to do our development. And let me show you where we finished at during our last last yesterday's example.",
  "topics": [
    "crm",
    "bpm",
    "integration",
    "development",
    "configuration",
    "ui_ux",
    "database"
  ],
  "complexity_level": "intermediate",
  "commands": [],
  "api_references": [],
  "code_examples": []
}