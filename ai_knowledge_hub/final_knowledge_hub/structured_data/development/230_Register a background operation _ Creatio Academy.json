{
  "id": 230,
  "url": "https://academy.creatio.com/docs/8.x/dev/development-on-creatio-platform/back-end-development/data-operations-back-end/execute-operations-in-the-background/examples/register-a-background-operation",
  "title": "Register a background operation | Creatio Academy",
  "category": "development",
  "description": "Create a business process that registers a background operation. The background operation takes approximately 30 seconds. After this time passes, the process must add an Activity created by background task record to the list view of the Activities section list.",
  "content": "Version: 8.3 On this page Level: intermediate Example Create a business process that registers a background operation. The background operation takes approximately 30 seconds. After this time passes, the process must add an Activity created by background task record to the list view of the Activities section list. 1. Create a class for the activity object ​ Go to the Configuration section and select a user-made package to add the schema. Click Add → Source code on the section list toolbar. Go to the Schema Designer and fill out the schema properties: Set Code to \"UsrActivityData.\" Set Title to \"ActivityData.\" Click Apply to apply the properties. Add the source code in the Schema Designer. UsrActivityData namespace Terrasoft . Configuration { using System ; using Terrasoft . Common ; using Terrasoft . Core ; using Terrasoft . Core . DB ; public class UsrActivityData { public string Title { get ; set ; } public Guid TypeId { get ; set ; } } } Publish the schema . 2. Create a class that adds an activity ​ Go to the Configuration section and select a user-made package to add the schema. Click Add → Source code on the section list toolbar. Go to the Schema Designer and fill out the schema properties: Set Code to \"UsrBackgroundActivityCreator.\" Set Title to \"BackgroundActivityCreator.\" Click Apply to apply the properties. Add the source code in the Schema Designer. UsrBackgroundActivityCreator namespace Terrasoft . Configuration { using System ; using Terrasoft . Common ; using Terrasoft . Core ; using Terrasoft . Core . DB ; using Terrasoft . Core . Tasks ; using System . Threading . Tasks ; public class UsrBackgroundActivityCreator : IBackgroundTask < UsrActivityData > , IUserConnectionRequired { private UserConnection _userConnection ; /* Implement the Run method of the IBackgroundTask interface. */ public void Run ( UsrActivityData data ) { /* Forced 30 second delay. */ System . Threading . Tasks . Task . Delay ( TimeSpan . FromSeconds ( 30 ) ) ; /* Create an activity. */ var activity = new Activity ( _userConnection ) { UseAdminRights = false , Id = Guid . NewGuid ( ) , TypeId = data . TypeId , Title = data . Title , /* Set the activity category to \"To do.\" */ ActivityCategoryId = new Guid ( \"F51C4643-58E6-DF11-971B-001D60E938C6\" ) } ; activity . SetDefColumnValues ( ) ; activity . Save ( false ) ; } /* Implement the SetUserConnection method of the IUserConnectionRequired interface. */ public void SetUserConnection ( UserConnection userConnection ) { _userConnection = userConnection ; } } } The UsrBackgroundActivityCreator class implements the IBackgroundTask<UsrActivityData> and IUserConnectionRequired interfaces. After a forced 30 seconds delay, the Run() method creates an instance of the Activities section object based on the given UsrActivityData instance. Publish the schema . 3. Create a business process that starts the background operation ​ Go to the Configuration section and select a user-made package to add the schema. Click Add → Business process on the section list toolbar. Go to the Process Designer and fill out the process properties: Set the Title property in the element setup area to \"Background Task Example Process.\" Set the Code property on the Settings tab of the element setup area to \"UsrBackgroundTaskExampleProcess.\" Implement the business process. Click System actions in the Designer’s element area and place a Script task element between the Simple start event and Terminate end event on the Process Designer’s working area. Set the name of the Script task element to \"Create background task.\" Add the code of the Script task element. Сode of the Script task element var data = new UsrActivityData { Title = \"Activity created by background task\" , TypeId = ActivityConsts . TaskTypeUId } ; Terrasoft . Core . Tasks . Task . StartNewWithUserConnection < UsrBackgroundActivityCreator , UsrActivityData > ( data ) ; return true ; Click the button in the Usings block on the Methods tab of the Process Designer and add the Terrasoft.Configuration namespace. This is required for the business process to support the implementations of the class for the activity object and class that adds an activity . Publish the changes . Outcome of the example ​ To run the Background Task Example Process business process, click Run on the Process Designer’s toolbar. As a result, the Background Task Example Process business process will add the Activity created by background task record to the list view of the Activities section list. Resources ​ Package with example implementation 1. Create a class for the activity object 2. Create a class that adds an activity 3. Create a business process that starts the background operation Outcome of the example Resources",
  "markdown": "Version: 8.3\n\nOn this page\n\nLevel: intermediate\n\nExample\n\nCreate a business process that registers a background operation. The background operation takes approximately 30 seconds. After this time passes, the process must add an **Activity created by background task** record to the list view of the **Activities** section list.\n\n## 1\\. Create a class for the activity object​\n\n  1. [Go to the **Configuration** section](https://academy.creatio.com/documents?ver=8.3&id=15101&anchor=title-2093-2) and select a user-made [package](https://academy.creatio.com/documents?ver=8.3&id=15121) to add the schema.\n\n  2. Click **Add** → **Source code** on the section list toolbar.\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/CreateSourceCodeSchema\\(7.17\\)/scr_add_schema.png)\n\n  3. Go to the Schema Designer and fill out the schema properties:\n\n     * Set **Code** to \"UsrActivityData.\"\n     * Set **Title** to \"ActivityData.\"\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/BackgroundTask/7.18/scr_ActivityData_Settings.png)\n\nClick **Apply** to apply the properties.\n\n  4. Add the source code in the Schema Designer.\n\nUsrActivityData\n         \n         namespace Terrasoft.Configuration {  \n             using System;  \n             using Terrasoft.Common;  \n             using Terrasoft.Core;  \n             using Terrasoft.Core.DB;  \n             public class UsrActivityData {  \n                 public string Title {  \n                     get;  \n                     set;  \n                 }  \n                 public Guid TypeId {  \n                     get;  \n                     set;  \n                 }  \n             }  \n         }  \n         \n\n  5. **Publish the schema**.\n\n\n\n\n## 2\\. Create a class that adds an activity​\n\n  1. [Go to the **Configuration** section](https://academy.creatio.com/documents?ver=8.3&id=15101&anchor=title-2093-2) and select a user-made [package](https://academy.creatio.com/documents?ver=8.3&id=15121) to add the schema.\n\n  2. Click **Add** → **Source code** on the section list toolbar.\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/CreateSourceCodeSchema\\(7.17\\)/scr_add_schema.png)\n\n  3. Go to the Schema Designer and fill out the schema properties:\n\n     * Set **Code** to \"UsrBackgroundActivityCreator.\"\n     * Set **Title** to \"BackgroundActivityCreator.\"\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/BackgroundTask/7.18/scr_BackgroundActivityCreator_Settings.png)\n\nClick **Apply** to apply the properties.\n\n  4. Add the source code in the Schema Designer.\n\nUsrBackgroundActivityCreator\n         \n         namespace Terrasoft.Configuration {  \n             using System;  \n             using Terrasoft.Common;  \n             using Terrasoft.Core;  \n             using Terrasoft.Core.DB;  \n             using Terrasoft.Core.Tasks;  \n             using System.Threading.Tasks;  \n           \n             public class UsrBackgroundActivityCreator: IBackgroundTask <UsrActivityData> , IUserConnectionRequired {  \n                 private UserConnection _userConnection;  \n           \n                 /* Implement the Run method of the IBackgroundTask interface. */  \n                 public void Run(UsrActivityData data) {  \n                     /* Forced 30 second delay. */  \n                     System.Threading.Tasks.Task.Delay(TimeSpan.FromSeconds(30));  \n                     /* Create an activity. */  \n                     var activity = new Activity(_userConnection) {  \n                         UseAdminRights = false,  \n                             Id = Guid.NewGuid(),  \n                             TypeId = data.TypeId,  \n                             Title = data.Title,  \n           \n                             /* Set the activity category to \"To do.\" */  \n                             ActivityCategoryId = new Guid(\"F51C4643-58E6-DF11-971B-001D60E938C6\")  \n                     };  \n                     activity.SetDefColumnValues();  \n                     activity.Save(false);  \n                 }  \n           \n                 /* Implement the SetUserConnection method of the IUserConnectionRequired interface. */  \n                 public void SetUserConnection(UserConnection userConnection) {  \n                     _userConnection = userConnection;  \n                 }  \n             }  \n         }  \n         \n\nThe `UsrBackgroundActivityCreator` class implements the `IBackgroundTask<UsrActivityData>` and `IUserConnectionRequired` interfaces. After a forced 30 seconds delay, the `Run()` method creates an instance of the **Activities** section object based on the given `UsrActivityData` instance.\n\n  5. **Publish the schema**.\n\n\n\n\n## 3\\. Create a business process that starts the background operation​\n\n  1. [Go to the **Configuration** section](https://academy.creatio.com/documents?ver=8.3&id=15101&anchor=title-2093-2) and select a user-made [package](https://academy.creatio.com/documents?ver=8.3&id=15121) to add the schema.\n\n  2. Click **Add** → **Business process** on the section list toolbar.\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/CreateBusinessProcessSchema/scr_add_schema.png)\n\n  3. Go to the Process Designer and fill out the process properties:\n\n     * Set the **Title** property in the element setup area to \"Background Task Example Process.\"\n     * Set the **Code** property on the **Settings** tab of the element setup area to \"UsrBackgroundTaskExampleProcess.\"\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/BackgroundTask/7.18/scr_BackgroundTaskExampleProcess_Settings.png)\n\n  4. Implement the business process.\n\n     1. Click **System actions** in the Designer’s element area and place a **Script task** element between the **Simple** start event and **Terminate** end event on the Process Designer’s working area.\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/BackgroundTask/7.18/scr_add_ScriptTask.png)\n\n     2. Set the name of the **Script task** element to \"Create background task.\"\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/BackgroundTask/7.18/scr_add_BusinessProcess.png)\n\n     3. Add the code of the **Script task** element.\n\nСode of the Script task element\n            \n            var data = new UsrActivityData {  \n                Title = \"Activity created by background task\",  \n                    TypeId = ActivityConsts.TaskTypeUId  \n            };  \n            Terrasoft.Core.Tasks.Task.StartNewWithUserConnection <UsrBackgroundActivityCreator, UsrActivityData> (data);  \n              \n            return true;  \n            \n\n     4. Click the ![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/CreateClientSchema\\(7.17\\)/scr_add_button.png) button in the **Usings** block on the **Methods** tab of the Process Designer and add the `Terrasoft.Configuration` namespace. This is required for the business process to support the implementations of the class for the activity object and class that adds an activity.\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/BackgroundTask/7.18/scr_add_Usings.png)\n\n  5. **Publish the changes**.\n\n\n\n\n## Outcome of the example​\n\nTo **run** the `Background Task Example Process` business process, click **Run** on the Process Designer’s toolbar.\n\nAs a result, the `Background Task Example Process` business process will add the **Activity created by background task** record to the list view of the **Activities** section list.\n\n![](https://academy.creatio.com/sites/default/files/documentation/sdk/ru/BPMonlineWebSDK/Screenshots/BackgroundTask/7.18/scr_result.png)\n\n* * *\n\n## Resources​\n\n[Package with example implementation](https://academy.creatio.com/sites/default/files/documents/downloads/SDK/Packages/sdkBackgroundTaskPackage_2021-09-08_09.11.49.zip)\n\n  * 1\\. Create a class for the activity object\n  * 2\\. Create a class that adds an activity\n  * 3\\. Create a business process that starts the background operation\n  * Outcome of the example\n  * Resources\n\n\n",
  "analysis": {
    "word_count": 773,
    "key_concepts": ["business process", "configuration", "section", "operation", "package"],
    "use_cases": [
      "building applications",
      "custom development",
      "API integration",
      "system administration",
      "user management"
    ],
    "related_topics": ["automation", "workflow", "process design", "bpm"],
    "difficulty": "beginner",
    "ai_tags": [
      "beginner",
      "creatio",
      "package",
      "operation",
      "documentation",
      "section",
      "configuration",
      "business process"
    ]
  },
  "ai_optimized": true,
  "processed_at": "2025-07-28T13:18:58.509181"
}
